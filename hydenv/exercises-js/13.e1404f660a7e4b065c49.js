(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{wJ9R:function(e,t,s){"use strict";s.r(t),s.d(t,"ExercisePageModule",(function(){return Pe}));var n=s("ofXK"),i=s("tyNb"),c=s("8MG2"),r=s("fXoL"),o=s("ws30"),b=s("rGdz"),a=s("+3VT"),l=s("aLtf");function u(e,t){if(1&e&&(r.Rb(0,"clr-timeline-step",6),r.Rb(1,"clr-timeline-step-header"),r.Dc(2,"Not correct"),r.Qb(),r.Rb(3,"clr-timeline-step-description"),r.Dc(4),r.cc(5,"date"),r.Qb(),r.Qb()),2&e){const e=t.$implicit;r.zb(4),r.Ec(r.ec(5,1,e,"dd.MM.yy HH:mm"))}}function h(e,t){if(1&e&&(r.Pb(0),r.Bc(1,u,6,4,"clr-timeline-step",5),r.Ob()),2&e){const e=r.bc(2);r.zb(1),r.hc("ngForOf",e.progress.tries)}}function f(e,t){1&e&&(r.Rb(0,"clr-timeline-step",7),r.Rb(1,"clr-timeline-step-header"),r.Dc(2,"Correct!"),r.Qb(),r.Rb(3,"clr-timeline-step-description"),r.Dc(4,"Well done!"),r.Qb(),r.Qb())}function p(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"clr-timeline",2),r.Bc(2,h,2,1,"ng-container",3),r.Bc(3,f,5,0,"clr-timeline-step",4),r.Qb(),r.Ob()),2&e){const e=r.bc();r.zb(1),r.hc("clrLayout",e.layout),r.zb(1),r.hc("ngIf",e.progress.tries),r.zb(1),r.hc("ngIf",e.progress.correct)}}function d(e,t){if(1&e&&(r.Rb(0,"clr-timeline",2),r.Rb(1,"clr-timeline-step",8),r.Rb(2,"clr-timeline-step-header"),r.Dc(3,"not started"),r.Qb(),r.Rb(4,"clr-timeline-step-description"),r.Dc(5,"No progress data found in the storage of this device"),r.Qb(),r.Qb(),r.Qb()),2&e){const e=r.bc();r.hc("clrLayout",e.layout)}}let g=(()=>{class e{constructor(e){this.progressService=e,this.layout="horizontal"}set exerciseId(e){this.currExerciseId=e,this.extractProgressInfo(this.progressService.progress.getValue())}ngOnInit(){this.progressSubscription=this.progressService.progress.subscribe({next:e=>this.extractProgressInfo(e)})}extractProgressInfo(e){this.progress=e.find(e=>e.exerciseId===this.currExerciseId)}ngOnDestroy(){this.progressSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(l.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-exercise-progress-detail"]],inputs:{exerciseId:"exerciseId",layout:"layout"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noProgress",""],[3,"clrLayout"],[4,"ngIf"],["clrState","success",4,"ngIf"],["clrState","error",4,"ngFor","ngForOf"],["clrState","error"],["clrState","success"],["clrState","not-started"]],template:function(e,t){if(1&e&&(r.Bc(0,p,4,3,"ng-container",0),r.Bc(1,d,6,1,"ng-template",null,1,r.Cc)),2&e){const e=r.nc(2);r.hc("ngIf",t.progress)("ngIfElse",e)}},directives:[n.p,c.S,n.o,c.T,c.V,c.U],pipes:[n.e],styles:[""]}),e})();const x=function(e){return["/","e",e]};function v(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"button",3),r.Dc(2," Back "),r.Rb(3,"span",4),r.Dc(4),r.Qb(),r.Qb(),r.Ob()),2&e){const e=r.bc(2);r.zb(1),r.hc("routerLink",r.lc(3,x,e.previousExercise.id))("ngClass",e.btnClasses),r.zb(3),r.Fc(" Previous: ",e.previousExercise.name," ")}}function y(e,t){if(1&e&&(r.Rb(0,"button",5),r.Dc(1," Back "),r.Rb(2,"span",4),r.Dc(3,"This was the first exercise in the active track."),r.Qb(),r.Qb()),2&e){const e=r.bc(2);r.hc("disabled",!0)("ngClass",e.btnClasses)}}function m(e,t){if(1&e&&(r.Pb(0),r.Bc(1,v,5,5,"ng-container",0),r.Bc(2,y,4,2,"ng-template",null,2,r.Cc),r.Ob()),2&e){const e=r.nc(3),t=r.bc();r.zb(1),r.hc("ngIf",t.previousExercise)("ngIfElse",e)}}function R(e,t){if(1&e&&(r.Rb(0,"button",5),r.Dc(1," Back "),r.Rb(2,"span",4),r.Dc(3,"There is no active Track."),r.Qb(),r.Qb()),2&e){const e=r.bc();r.hc("disabled",!0)("ngClass",e.btnClasses)}}let I=(()=>{class e{constructor(e){this.exerciseService=e,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currentId=e,this.isSynced&&this.getPrevious()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.previousExercise||this.getPrevious()}})}getPrevious(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){const e=this.exerciseService.getPreviousExercise(this.currentId,"all");this.previousExercise=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(o.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-previous-exercise-button"]],inputs:{exerciseId:"exerciseId",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-right",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(r.Bc(0,m,4,2,"ng-container",0),r.Bc(1,R,4,2,"ng-template",null,1,r.Cc)),2&e){const e=r.nc(2);r.hc("ngIf",t.hasActiveTrack)("ngIfElse",e)}},directives:[n.p,i.d,n.n],styles:[""]}),e})();const Q=function(e){return["/","e",e]};function S(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"button",3),r.Dc(2," Next "),r.Rb(3,"span",4),r.Dc(4),r.Qb(),r.Qb(),r.Ob()),2&e){const e=r.bc(2);r.zb(1),r.hc("routerLink",r.lc(3,Q,e.nextExericse.id))("ngClass",e.btnClasses),r.zb(3),r.Fc(" Next up: ",e.nextExericse.name," ")}}function w(e,t){if(1&e&&(r.Rb(0,"button",5),r.Dc(1," Next "),r.Rb(2,"span",4),r.Dc(3),r.Qb(),r.Qb()),2&e){const e=r.bc(2);r.hc("disabled",!0)("ngClass",e.btnClasses),r.zb(3),r.Gc(" This was the last ",e.onlyUnsolved?"unsolved ":""," exercise ","all"===e.session?"on this track":"in this session",".")}}function O(e,t){if(1&e&&(r.Pb(0),r.Bc(1,S,5,5,"ng-container",0),r.Bc(2,w,4,4,"ng-template",null,2,r.Cc),r.Ob()),2&e){const e=r.nc(3),t=r.bc();r.zb(1),r.hc("ngIf",t.nextExericse)("ngIfElse",e)}}function C(e,t){if(1&e&&(r.Rb(0,"button",5),r.Dc(1," Next "),r.Rb(2,"span",4),r.Dc(3,"There is no active Track."),r.Qb(),r.Qb()),2&e){const e=r.bc();r.hc("disabled",!0)("ngClass",e.btnClasses)}}let M=(()=>{class e{constructor(e){this.exerciseService=e,this.session="all",this.onlyUnsolved=!1,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currId=e,this.isSynced&&this.getNext()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.nextExericse||this.getNext()}})}getNext(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){let e;this.onlyUnsolved?e=this.exerciseService.getNextUnsolvedExercise(this.currId,this.session):(e=this.exerciseService.getNextExercise(this.currId,this.session),console.log(e)),this.nextExericse=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(o.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-next-exercise-button"]],inputs:{exerciseId:"exerciseId",session:"session",onlyUnsolved:"onlyUnsolved",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-left",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(r.Bc(0,O,4,2,"ng-container",0),r.Bc(1,C,4,2,"ng-template",null,1,r.Cc)),2&e){const e=r.nc(2);r.hc("ngIf",t.hasActiveTrack)("ngIfElse",e)}},directives:[n.p,i.d,n.n],styles:[""]}),e})();var z=s("tk/3");function D(e,t){if(1&e&&(r.Pb(0),r.Mb(1,"div",1),r.Ob()),2&e){const e=r.bc(2);r.zb(1),r.hc("innerHTML",e.contentText,r.sc)}}function E(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"p"),r.Dc(2),r.Qb(),r.Ob()),2&e){const e=r.bc(2);r.zb(2),r.Ec(e.contentText)}}function T(e,t){if(1&e&&(r.Pb(0),r.Bc(1,D,2,1,"ng-container",0),r.Bc(2,E,3,1,"ng-container",0),r.Ob()),2&e){const e=r.bc();r.zb(1),r.hc("ngIf","html"===e.content.type),r.zb(1),r.hc("ngIf","text"===e.content.type)}}let k=(()=>{class e{constructor(e){this.http=e}set body(e){this.content=e,this.setContentText()}ngOnInit(){this.setContentText()}setContentText(){this.content&&(this.content.content?this.contentText=this.content.content:this.loadFromUrl())}loadFromUrl(){this.http.get(this.content.url).subscribe({next:e=>console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(z.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-exercise-body"]],inputs:{content:"content",body:"body"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&r.Bc(0,T,3,2,"ng-container",0),2&e&&r.hc("ngIf",t.content)},directives:[n.p],styles:[""]}),e})();var P=s("OcyY"),L=s("8M4i"),j=s("EUcb"),B=s("oSzE"),_=s("DlmY");function U(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new _.a;++t<s;)this.add(e[t])}U.prototype.add=U.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},U.prototype.has=function(e){return this.__data__.has(e)};var F=U,H=function(e,t){for(var s=-1,n=null==e?0:e.length;++s<n;)if(t(e[s],s,e))return!0;return!1},A=function(e,t,s,n,i,c){var r=1&s,o=e.length,b=t.length;if(o!=b&&!(r&&b>o))return!1;var a=c.get(e),l=c.get(t);if(a&&l)return a==t&&l==e;var u=-1,h=!0,f=2&s?new F:void 0;for(c.set(e,t),c.set(t,e);++u<o;){var p=e[u],d=t[u];if(n)var g=r?n(d,p,u,t,e,c):n(p,d,u,e,t,c);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!H(t,(function(e,t){if(!f.has(t)&&(p===e||i(p,e,s,n,c)))return f.push(t)}))){h=!1;break}}else if(p!==d&&!i(p,d,s,n,c)){h=!1;break}}return c.delete(e),c.delete(t),h},N=s("ylTp"),q=s("Ce4a"),Y=s("YHEm"),V=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,n){s[++t]=[n,e]})),s},Z=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s},J=N.a?N.a.prototype:void 0,G=J?J.valueOf:void 0,W=s("TFwu"),$=Object.prototype.hasOwnProperty,K=s("YM6B"),X=s("/1FC"),ee=s("WOAq"),te=s("oYcn"),se="[object Arguments]",ne="[object Array]",ie="[object Object]",ce=Object.prototype.hasOwnProperty,re=function(e,t,s){var n=(s="function"==typeof s?s:void 0)?s(e,t):void 0;return void 0===n?function e(t,s,n,i,c){return t===s||(null==t||null==s||!Object(j.a)(t)&&!Object(j.a)(s)?t!=t&&s!=s:function(e,t,s,n,i,c){var r=Object(X.a)(e),o=Object(X.a)(t),b=r?ne:Object(K.a)(e),a=o?ne:Object(K.a)(t),l=(b=b==se?ie:b)==ie,u=(a=a==se?ie:a)==ie,h=b==a;if(h&&Object(ee.a)(e)){if(!Object(ee.a)(t))return!1;r=!0,l=!1}if(h&&!l)return c||(c=new B.a),r||Object(te.a)(e)?A(e,t,s,n,i,c):function(e,t,s,n,i,c,r){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!c(new q.a(e),new q.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(Y.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=V;case"[object Set]":if(o||(o=Z),e.size!=t.size&&!(1&n))return!1;var b=r.get(e);if(b)return b==t;n|=2,r.set(e,t);var a=A(o(e),o(t),n,i,c,r);return r.delete(e),a;case"[object Symbol]":if(G)return G.call(e)==G.call(t)}return!1}(e,t,b,s,n,i,c);if(!(1&s)){var f=l&&ce.call(e,"__wrapped__"),p=u&&ce.call(t,"__wrapped__");if(f||p){var d=f?e.value():e,g=p?t.value():t;return c||(c=new B.a),i(d,g,s,n,c)}}return!!h&&(c||(c=new B.a),function(e,t,s,n,i,c){var r=1&s,o=Object(W.a)(e),b=o.length;if(b!=Object(W.a)(t).length&&!r)return!1;for(var a=b;a--;){var l=o[a];if(!(r?l in t:$.call(t,l)))return!1}var u=c.get(e),h=c.get(t);if(u&&h)return u==t&&h==e;var f=!0;c.set(e,t),c.set(t,e);for(var p=r;++a<b;){var d=e[l=o[a]],g=t[l];if(n)var x=r?n(g,d,l,t,e,c):n(d,g,l,e,t,c);if(!(void 0===x?d===g||i(d,g,s,n,c):x)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(f=!1)}return c.delete(e),c.delete(t),f}(e,t,s,n,i,c))}(t,s,n,i,e,c))}(e,t,void 0,s):!!n},oe=s("h+eY"),be=s("3Pt+"),ae=s("SS/w");function le(e,t){1&e&&(r.Pb(0),r.Rb(1,"p",1),r.Rb(2,"i"),r.Dc(3,"Run your query to view the results here"),r.Qb(),r.Qb(),r.Ob())}function ue(e,t){1&e&&(r.Pb(0),r.Rb(1,"div",2),r.Rb(2,"div",3),r.Mb(3,"clr-icon",4),r.Qb(),r.Rb(4,"div",5),r.Rb(5,"p"),r.Dc(6,"Your solution is correct."),r.Qb(),r.Qb(),r.Qb(),r.Ob())}function he(e,t){if(1&e){const e=r.Sb();r.Rb(0,"clr-toggle-container"),r.Rb(1,"clr-toggle-wrapper"),r.Rb(2,"input",9),r.Zb("ngModelChange",(function(t){return r.rc(e),r.bc(2).showHint=t})),r.Qb(),r.Rb(3,"label"),r.Dc(4,"show hint"),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=r.bc(2);r.zb(2),r.hc("ngModel",e.showHint)}}function fe(e,t){if(1&e){const e=r.Sb();r.Pb(0),r.Rb(1,"div",2),r.Rb(2,"div",3),r.Mb(3,"clr-icon",6),r.Qb(),r.Rb(4,"div",5),r.Rb(5,"div",2),r.Rb(6,"div",7),r.Rb(7,"p"),r.Dc(8,"Your solution is not yet quite correct"),r.Qb(),r.Qb(),r.Rb(9,"div",8),r.Rb(10,"clr-toggle-container"),r.Rb(11,"clr-toggle-wrapper"),r.Rb(12,"input",9),r.Zb("ngModelChange",(function(t){return r.rc(e),r.bc().showSolution=t})),r.Qb(),r.Rb(13,"label"),r.Dc(14,"show solution"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(15,"div",8),r.Bc(16,he,5,1,"clr-toggle-container",0),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Ob()}if(2&e){const e=r.bc();r.zb(12),r.hc("ngModel",e.showSolution),r.zb(4),r.hc("ngIf",e.exercise.hint)}}function pe(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"h3"),r.Dc(2,"Hint"),r.Qb(),r.Mb(3,"p",10),r.Ob()),2&e){const e=r.bc();r.zb(3),r.hc("innerHTML",e.exercise.hint,r.sc)}}function de(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"h3"),r.Dc(2,"Solution query"),r.Qb(),r.Rb(3,"pre"),r.Mb(4,"code",10),r.Qb(),r.Ob()),2&e){const e=r.bc();r.zb(4),r.hc("innerHTML",e.exercise.solution.code?e.exercise.solution.code:e.exercise.solution.content,r.sc)}}function ge(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"h3"),r.Dc(2,"Your Solution"),r.Qb(),r.Mb(3,"app-sql-result",11),r.Ob()),2&e){const e=r.bc();r.zb(3),r.hc("result",e.userResult)}}function xe(e,t){if(1&e&&(r.Pb(0),r.Rb(1,"h3"),r.Dc(2,"Sample Solution"),r.Qb(),r.Mb(3,"app-sql-result",11),r.Ob()),2&e){const e=r.bc();r.zb(3),r.hc("result",e.solution)}}function ve(e,t){if("number"==typeof(s=e)||Object(j.a)(s)&&"[object Number]"==Object(L.a)(s))return Math.abs(e-t)<.01;var s}let ye=(()=>{class e{constructor(e,t,s){this.exerciseService=e,this.progress=t,this.analytics=s,this.startTime=new Date,this.didUpdate=!1,this.checked=new r.n,this.explain=!1,this.safeMode=!0,this.solutionCorrect=!1,this.showSolution=!1,this.showHint=!1}set result(e){e&&this.onUserInput(e)}ngOnInit(){}onUserInput(e){if(this.userResult=e,this.solution)this.compare();else{const e=this.explain?"text":null;console.log(`Explain: ${e} Safe Mode: ${this.safeMode}`),this.exerciseService.executeSql(this.exercise.solution.content,e,!this.safeMode).then(e=>this.solution=e).then(()=>this.compare()).catch(e=>console.log(e))}}compare(){re(this.userResult.data,this.solution.data,ve)?(this.solutionCorrect=!0,this.showSolution=!0):this.solutionCorrect=!1;const e=(new Date).getTime()-this.startTime.getTime();this.didUpdate=!0,this.startTime=new Date,this.progress.update(this.exercise.id,this.solutionCorrect,e).then(()=>{this.checked.emit(this.solutionCorrect)})}onHintToggle(){this.showHint&&this.analytics.logEvent("exercise_showHint",{exerciseId:this.exercise.id})}onSolutionToggle(){this.showSolution&&this.analytics.logEvent("exercise_showSolution",{exerciseId:this.exercise.id})}ngOnDestroy(){if(!this.didUpdate){const e=(new Date).getTime()-this.startTime.getTime();this.analytics.logEvent("exercise_no_attempt",{exerciseId:this.exercise.id,time:e})}}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(o.a),r.Lb(l.a),r.Lb(oe.c))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-exercise-compare"]],inputs:{exercise:"exercise",result:"result",explain:"explain",safeMode:"safeMode"},outputs:{checked:"checked"},decls:7,vars:7,consts:[[4,"ngIf"],[2,"text-align","center","display","flex","flex-direction","column","justify-content","center","height","90%"],[1,"clr-row"],[1,"clr-col-4"],["shape","check","size","72"],[1,"clr-col-8"],["shape","times","size","72"],[1,"clr-col-12"],[1,"clr-col-6"],["type","checkbox","clrToggle","",3,"ngModel","ngModelChange"],[3,"innerHTML"],[3,"result"]],template:function(e,t){1&e&&(r.Bc(0,le,4,0,"ng-container",0),r.Bc(1,ue,7,0,"ng-container",0),r.Bc(2,fe,17,2,"ng-container",0),r.Bc(3,pe,4,1,"ng-container",0),r.Bc(4,de,5,1,"ng-container",0),r.Bc(5,ge,4,1,"ng-container",0),r.Bc(6,xe,4,1,"ng-container",0)),2&e&&(r.hc("ngIf",!t.solution),r.zb(1),r.hc("ngIf",t.solution&&t.solutionCorrect),r.zb(1),r.hc("ngIf",t.solution&&!t.solutionCorrect),r.zb(1),r.hc("ngIf",t.showHint),r.zb(1),r.hc("ngIf",t.showSolution),r.zb(1),r.hc("ngIf",t.userResult),r.zb(1),r.hc("ngIf",t.solution&&t.solutionCorrect))},directives:[n.p,c.x,c.f,c.g,be.a,c.e,be.j,be.l,c.C,ae.a],styles:[""]}),e})();var me=s("MffP"),Re=s("52BL");function Ie(e,t){if(1&e&&(r.Rb(0,"clr-tab-content"),r.Mb(1,"app-exercise-compare",22),r.Qb()),2&e){const e=r.bc(2);r.zb(1),r.hc("exercise",e.exercise)("explain",e.explain)("safeMode",e.safeMode)("result",e.result)}}function Qe(e,t){1&e&&(r.Pb(0),r.Mb(1,"app-history-list"),r.Ob())}const Se=function(){return[3,5,10,25]};function we(e,t){1&e&&(r.Pb(0),r.Mb(1,"app-history-table",23),r.Ob()),2&e&&(r.zb(1),r.hc("pageSize",10)("pageSizeOptions",r.kc(2,Se)))}const Oe=function(){return["btn-sm","btn-primary"]};function Ce(e,t){if(1&e){const e=r.Sb();r.Pb(0),r.Rb(1,"div",2),r.Rb(2,"div",3),r.Rb(3,"app-sql-input",4),r.Zb("result",(function(t){return r.rc(e),r.bc().onSqlExecuted(t)}))("addExplainChange",(function(t){return r.rc(e),r.bc().explain=t}))("safeModeChange",(function(t){return r.rc(e),r.bc().safeMode=t})),r.Qb(),r.Qb(),r.Rb(4,"div",5),r.Rb(5,"clr-tabs"),r.Rb(6,"clr-tab"),r.Rb(7,"button",6),r.Dc(8,"Task Description"),r.Qb(),r.Rb(9,"clr-tab-content"),r.Rb(10,"div",7),r.Rb(11,"div",8),r.Mb(12,"app-exercise-progress-detail",9),r.Qb(),r.Rb(13,"div",10),r.Rb(14,"div",11),r.Mb(15,"app-previous-exercise-button",12),r.Mb(16,"app-next-exercise-button",12),r.Qb(),r.Qb(),r.Rb(17,"div",13),r.Rb(18,"h2"),r.Dc(19),r.Qb(),r.Mb(20,"app-exercise-body",14),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(21,"clr-tab"),r.Rb(22,"button",6),r.Dc(23,"Results"),r.Qb(),r.Bc(24,Ie,2,4,"clr-tab-content",15),r.Qb(),r.Rb(25,"clr-tab"),r.Rb(26,"button",6),r.Dc(27,"Query History"),r.Qb(),r.Rb(28,"clr-tab-content"),r.Rb(29,"h2",16),r.Rb(30,"span"),r.Dc(31,"Query History"),r.Qb(),r.Rb(32,"div",17),r.Rb(33,"button",18),r.Zb("click",(function(){return r.rc(e),r.bc().historyUseList=!0})),r.Mb(34,"clr-icon",19),r.Qb(),r.Rb(35,"button",18),r.Zb("click",(function(){return r.rc(e),r.bc().historyUseList=!1})),r.Mb(36,"clr-icon",20),r.Qb(),r.Qb(),r.Qb(),r.Bc(37,Qe,2,0,"ng-container",21),r.Bc(38,we,2,3,"ng-container",21),r.Qb(),r.Qb(),r.Rb(39,"clr-tab"),r.Rb(40,"button",6),r.Dc(41,"Database Information"),r.Qb(),r.Rb(42,"clr-tab-content"),r.Mb(43,"app-schema-inspector"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Ob()}if(2&e){const e=r.bc();r.zb(3),r.hc("sql",e.prefill)("safeMode",!e.exercise.disableSafeMode),r.zb(9),r.hc("exerciseId",e.exerciseId),r.zb(3),r.hc("exerciseId",e.exerciseId)("btnClasses",r.kc(14,Oe)),r.zb(1),r.hc("exerciseId",e.exerciseId)("btnClasses",r.kc(15,Oe)),r.zb(3),r.Ec(e.exercise.name),r.zb(1),r.hc("body",e.exercise.body),r.zb(4),r.hc("clrIfActive",e.forceResultTab),r.zb(9),r.hc("disabled",e.historyUseList),r.zb(2),r.hc("disabled",!e.historyUseList),r.zb(2),r.hc("ngIf",e.historyUseList),r.zb(1),r.hc("ngIf",!e.historyUseList)}}function Me(e,t){1&e&&(r.Rb(0,"p"),r.Rb(1,"i"),r.Dc(2,"The requested resource could not be loaded. No idea why."),r.Qb(),r.Qb())}let ze=(()=>{class e{constructor(e,t,s){this.exerciseService=e,this.route=t,this.history=s,this.isSynced=!1,this.explain=!1,this.safeMode=!0,this.historyUseList=!1,this.forceResultTab=!1}onSqlExecuted(e){this.result=e,this.forceResultTab=!0}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.isSynced&&this.exerciseId&&this.fetchExerciseDoc(this.exerciseId)}}),this.route.paramMap.subscribe({next:e=>{this.exerciseId=e.get("id"),this.isSynced&&this.fetchExerciseDoc(this.exerciseId)}}),this.clipboardSubscription=this.history.clipboard.subscribe({next:e=>{e&&(this.prefill=e.body.content,e.result&&(this.result=e.result))}})}fetchExerciseDoc(e){this.exerciseService.getExerciseById(e).then(e=>{this.exercise=e,this.setPrefill()})}setPrefill(){this.prefill=this.exercise&&this.exercise.solution.prefill?this.exercise.solution.prefill:"-- Put your SQL code here.\n-- If you use semicolons, multiple commands or other Queries than SELECT, you have to disable save Mode"}ngOnDestroy(){this.syncSubscription.unsubscribe(),this.clipboardSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(o.a),r.Lb(i.a),r.Lb(b.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-exercise-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[1,"clr-row","wrap-row"],[1,"clr-col-lg-5","clr-col-md-12"],[3,"sql","safeMode","result","addExplainChange","safeModeChange"],[1,"clr-col-lg-7","clr-col-md-12"],["clrTabLink",""],[1,"clr-row",2,"margin","0","padding","0px","max-width","98%"],[1,"clr-col-9",2,"overflow-x","auto"],[3,"exerciseId"],[1,"clr-col-3",2,"display","flex","flex-direction","column","justify-content","center"],[2,"display","flex","flex-direction","row","justify-content","center"],[3,"exerciseId","btnClasses"],[1,"clr-col-12",2,"max-width","992px"],[3,"body"],[4,"clrIfActive"],[2,"display","flex","flex-direction","row","justify-content","space-between","margin-bottom","1.2rem"],[1,"btn-group","btn-icon","btn-default"],[1,"btn",3,"disabled","click"],["shape","view-list"],["shape","table"],[4,"ngIf"],[3,"exercise","explain","safeMode","result"],[3,"pageSize","pageSizeOptions"]],template:function(e,t){if(1&e&&(r.Bc(0,Ce,44,16,"ng-container",0),r.Bc(1,Me,3,0,"ng-template",null,1,r.Cc)),2&e){const e=r.nc(2);r.hc("ngIf",t.exercise)("ngIfElse",e)}},directives:[n.p,a.a,c.R,c.ib,c.O,c.Q,c.bb,c.P,g,I,M,k,c.y,c.x,P.a,ye,me.a,Re.a],styles:[".wrap-row[_ngcontent-%COMP%]{height:calc(100vh - 60px);width:98%;padding:.6rem;margin:0}"]}),e})();var De=s("sWoP"),Ee=s("Yv6K"),Te=s("aPRB"),ke=s("hxDo");let Pe=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[n.c,i.g.forChild([{path:":id",component:ze}]),c.a,De.a,Ee.a,Te.a,ke.a]]}),e})()}}]);