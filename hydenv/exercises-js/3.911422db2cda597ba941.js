(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+3VT":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var c=n("fXoL"),i=n("8MG2"),r=n("ws30"),o=n("rGdz"),s=n("3Pt+"),l=n("/qmH"),a=n("yvwu"),b=n("ofXK");function u(t,e){if(1&t&&(c.Pb(0),c.Rb(1,"clr-alert",14),c.Rb(2,"clr-alert-item"),c.Mb(3,"span",15),c.Rb(4,"div",16),c.Rb(5,"a",17),c.Rb(6,"button",18),c.Dc(7,"ISSUE"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Ob()),2&t){const t=c.bc();c.zb(1),c.hc("clrAlertType","danger")("clrAlertAppLevel",!0),c.zb(2),c.hc("innerHTML",t.errorMessage,c.sc)}}const p=function(){return{theme:"vs-dark",language:"sql"}},d=function(){return{bottom:!0}};let h=(()=>{class t{constructor(t,e){this.exerciseService=t,this.queryHistory=e,this.result=new c.n,this.sqlChange=new c.n,this.addExplain=!1,this.addExplainChange=new c.n,this.enableSafeModeTrigger=!1,this.safeMode=!0,this.safeModeChange=new c.n,this.btnState=i.F.DEFAULT,this.editorHeight="95%"}handleKeypress(t){("F5"===t.code||"Enter"===t.code&&t.ctrlKey)&&(t.preventDefault(),this.onExecute())}ngOnInit(){this.defaultSql=this.sql}onExecute(){this.errorMessage=null,this.btnState=i.F.LOADING,this.exerciseService.executeSql(this.sql,this.addExplain?"text":null,!this.safeMode).then(t=>{this.result.emit(t),this.queryHistory.storeQuery(this.sql,t),this.btnState=i.F.SUCCESS}).catch(t=>{this.btnState=i.F.ERROR,0===t.status&&(this.errorMessage="The hydenv backend is offline or unreachable. Used URL: "+t.url)})}onChange(t){this.sql=t}onReset(){this.sql=this.defaultSql}onResize(t){console.log(t),this.editorHeight=t.rectangle.height+"px",window.dispatchEvent(new Event("resize"))}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(r.a),c.Lb(o.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-sql-input"]],hostBindings:function(t,e){1&t&&c.Zb("keydown",(function(t){return e.handleKeypress(t)}),!1,c.qc)},inputs:{sql:"sql",addExplain:"addExplain",enableSafeModeTrigger:"enableSafeModeTrigger",safeMode:"safeMode"},outputs:{result:"result",sqlChange:"sqlChange",addExplainChange:"addExplainChange",safeModeChange:"safeModeChange"},decls:29,vars:15,consts:[[1,"clr-row"],[1,"clr-col-4"],["type","checkbox","clrToggle","",3,"ngModel","ngModelChange"],[1,"tooltip","tooltip-md","tooltip-top-right"],["type","checkbox","clrToggle","",3,"ngModel","disabled","ngModelChange"],[1,"tooltip-content"],[1,"btn","btn-flat","btn-sm",2,"float","right",3,"disabled","click"],[1,"clr-col-12",2,"height","70vh"],["mwlResizable","",1,"resize-container",3,"enableGhostResize","resizing"],[2,"height","100%",3,"options","ngModel","ngModelChange"],["mwlResizeHandle","",1,"resize",3,"resizeEdges"],[1,"clr-col-12"],[4,"ngIf"],[1,"btn","btn-outline-success","btn-block",3,"clrLoading","click"],[3,"clrAlertType","clrAlertAppLevel"],[1,"alert-text",3,"innerHTML"],[1,"alert-actions"],["href","https://github.com/data-hydenv/hydenv-database/issues/new?labels=bug,exercise-js&assignees=mmaelicke","target","_blank"],[1,"btn","alert-action","btn-sm"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Rb(1,"div",1),c.Rb(2,"clr-toggle-container"),c.Rb(3,"clr-toggle-wrapper"),c.Rb(4,"input",2),c.Zb("ngModelChange",(function(t){return e.addExplain=t})),c.Qb(),c.Rb(5,"label"),c.Dc(6,"Explain results"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(7,"div",1),c.Rb(8,"clr-toggle-container"),c.Rb(9,"clr-toggle-wrapper",3),c.Rb(10,"input",4),c.Zb("ngModelChange",(function(t){return e.safeMode=t})),c.Qb(),c.Rb(11,"label"),c.Dc(12,"Safe mode: "),c.Rb(13,"code"),c.Dc(14),c.Qb(),c.Qb(),c.Rb(15,"span",5),c.Dc(16,"In safe mode, only single SELECT queries are allowed."),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(17,"div",1),c.Rb(18,"button",6),c.Zb("click",(function(){return e.onReset()})),c.Dc(19,"RESET"),c.Qb(),c.Qb(),c.Qb(),c.Rb(20,"div",0),c.Rb(21,"div",7),c.Rb(22,"div",8),c.Zb("resizing",(function(t){return e.onResize(t)})),c.Rb(23,"ngx-monaco-editor",9),c.Zb("ngModelChange",(function(t){return e.onChange(t)})),c.Qb(),c.Mb(24,"div",10),c.Qb(),c.Qb(),c.Rb(25,"div",11),c.Bc(26,u,8,3,"ng-container",12),c.Rb(27,"button",13),c.Zb("click",(function(){return e.onExecute()})),c.Dc(28,"Execute"),c.Qb(),c.Qb(),c.Qb()),2&t&&(c.zb(4),c.hc("ngModel",e.addExplain),c.zb(6),c.hc("ngModel",e.safeMode)("disabled",!e.enableSafeModeTrigger),c.zb(4),c.Ec(e.safeMode?"on":"off"),c.zb(4),c.hc("disabled",e.sql==e.defaultSql),c.zb(4),c.yc("height",e.editorHeight),c.hc("enableGhostResize",!0),c.zb(1),c.hc("options",c.kc(13,p))("ngModel",e.sql),c.zb(1),c.hc("resizeEdges",c.kc(14,d)),c.zb(2),c.hc("ngIf",e.errorMessage),c.zb(1),c.hc("clrLoading",e.btnState))},directives:[i.f,i.g,s.a,i.e,s.j,s.l,i.C,l.a,a.a,l.c,b.p,i.E,i.D,i.b,i.c,i.d],styles:["div.clr-row[_ngcontent-%COMP%]{margin-top:.6rem}mwlResizable[_ngcontent-%COMP%]{box-sizing:border-box}.resize-container[_ngcontent-%COMP%]{min-height:350px;height:90%;max-height:95%;margin-bottom:1rem}.resize-container[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{height:7px;width:100%;cursor:row-resize;background-color:#243944;transition-duration:.1s;z-index:999}.resize-container[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]:hover{background-color:#69a0be;transition-delay:.1s}"]}),t})()},"52BL":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var c=n("fXoL"),i=n("rGdz"),r=n("8MG2"),o=n("ofXK"),s=n("Dvla");function l(t,e){1&t&&c.Mb(0,"clr-icon",4)}function a(t,e){if(1&t&&c.Dc(0),2&t){const t=c.bc();c.Fc(" ",t.label,"\n")}}let b=(()=>{class t{constructor(t){this.history=t,this.btnClasses=["btn","btn-icon"],this.useIcon=!0,this.label="COPY"}ngOnInit(){}onClick(){this.history.clipboard.next(this.queryRun)}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-copy-query-run"]],inputs:{queryRun:"queryRun",btnClasses:"btnClasses",useIcon:"useIcon",label:"label"},decls:6,vars:4,consts:[["type","button","role","tooltip",1,"tooltip","tooltip-md",3,"ngClass","disabled","click"],["shape","copy",4,"ngIf","ngIfElse"],[1,"tooltip-content"],["noIcon",""],["shape","copy"]],template:function(t,e){if(1&t&&(c.Rb(0,"button",0),c.Zb("click",(function(){return e.onClick()})),c.Bc(1,l,1,0,"clr-icon",1),c.Rb(2,"span",2),c.Dc(3,"Copy SQL and Result"),c.Qb(),c.Qb(),c.Bc(4,a,1,1,"ng-template",null,3,c.Cc)),2&t){const t=c.nc(5);c.hc("ngClass",e.btnClasses)("disabled",!e.queryRun),c.zb(1),c.hc("ngIf",e.useIcon)("ngIfElse",t)}},directives:[o.n,o.p,r.x],styles:[""]}),t})();function u(t,e){if(1&t&&(c.Rb(0,"clr-dg-cell"),c.Dc(1),c.Qb()),2&t){const t=c.bc().$implicit;c.zb(1),c.Fc("",t.result.data.length," rows returned")}}function p(t,e){1&t&&(c.Rb(0,"clr-dg-cell"),c.Rb(1,"i"),c.Dc(2,"no result"),c.Qb(),c.Qb())}function d(t,e){if(1&t&&(c.Rb(0,"clr-dg-row"),c.Rb(1,"clr-dg-cell"),c.Dc(2),c.cc(3,"date"),c.Qb(),c.Rb(4,"clr-dg-cell"),c.Dc(5),c.Qb(),c.Bc(6,u,2,1,"clr-dg-cell",5),c.Bc(7,p,3,0,"clr-dg-cell",5),c.Rb(8,"clr-dg-cell"),c.Rb(9,"button",6),c.Mb(10,"clr-icon",7),c.Rb(11,"span",8),c.Dc(12,"Copy SQL to clipboard"),c.Qb(),c.Qb(),c.Mb(13,"app-copy-query-run",9),c.Qb(),c.Qb()),2&t){const t=e.$implicit;c.zb(2),c.Ec(c.ec(3,6,t.date,"d. MMM yyyy HH:mm")),c.zb(3),c.Ec(t.body.content.length>37?t.body.content.slice(0,37)+"...":t.body.content),c.zb(1),c.hc("ngIf",t.result),c.zb(1),c.hc("ngIf",!t.result),c.zb(2),c.hc("cbContent",t.body.content),c.zb(4),c.hc("queryRun",t)}}let h=(()=>{class t{constructor(t){this.history=t,this.queries=[],this.pageSize=25,this.pageSizeOptions=[10,25,50,100]}ngOnInit(){this.queriesSubscription=this.history.history.subscribe({next:t=>this.queries=t})}ngOnDestroy(){this.queriesSubscription.unsubscribe()}onDeleteHistory(){this.history.deleteHistory()}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-history-table"]],inputs:{pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},decls:18,vars:7,consts:[[4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],[1,"btn","btn-link",3,"click"],[4,"ngIf"],["ngxClipboard","","role","tooltip",1,"btn","btn-icon","tooltip","tooltip-md",3,"cbContent"],["shape","copy-to-clipboard"],[1,"tooltip-content"],[3,"queryRun"]],template:function(t,e){if(1&t&&(c.Rb(0,"clr-datagrid"),c.Rb(1,"clr-dg-column"),c.Dc(2,"Date"),c.Qb(),c.Rb(3,"clr-dg-column"),c.Dc(4,"Query"),c.Qb(),c.Rb(5,"clr-dg-column"),c.Dc(6,"Result"),c.Qb(),c.Rb(7,"clr-dg-column"),c.Dc(8,"Actions"),c.Qb(),c.Bc(9,d,14,9,"clr-dg-row",0),c.Rb(10,"clr-dg-footer"),c.Rb(11,"clr-dg-pagination",1,2),c.Rb(13,"clr-dg-page-size",3),c.Dc(14,"Show"),c.Qb(),c.Dc(15),c.Qb(),c.Rb(16,"button",4),c.Zb("click",(function(){return e.onDeleteHistory()})),c.Dc(17,"DELETE ALL"),c.Qb(),c.Qb(),c.Qb()),2&t){const t=c.nc(12);c.zb(9),c.hc("clrDgItemsOf",e.queries),c.zb(2),c.hc("clrDgPageSize",e.pageSize)("clrDgTotalItems",e.queries.length),c.zb(2),c.hc("clrPageSizeOptions",e.pageSizeOptions),c.zb(2),c.Hc(" ",t.firstItem+1," - ",t.lastItem+1," of ",e.queries.length," queries ")}},directives:[r.h,r.eb,r.gb,r.ab,r.hb,r.j,r.db,r.o,r.n,r.q,r.p,r.r,r.fb,r.i,r.cb,o.p,s.a,r.x,b],pipes:[o.e],styles:[""]}),t})()},Dvla:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return a}));var c=n("ofXK"),i=n("fXoL");const r=new i.q("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:()=>window}:void 0);var o=n("XNiG");let s=(()=>{class t{constructor(t,e){this.document=t,this.window=e,this.copySubject=new o.a,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});const e=this.copyFromContent(t);return this.pushCopyResponse(e?{content:t,isSuccess:e}:{isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,e=!0){try{this.selectTarget(t);const n=this.copyText();return this.clearSelection(e?t:void 0,this.window),n&&this.isCopySuccessInIE11()}catch(n){return!1}}isCopySuccessInIE11(){const t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,e=this.document.body){if(this.tempTextArea&&!e.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{e.appendChild(this.tempTextArea)}catch(c){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;const n=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),n}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,e){var n;t&&t.focus(),null===(n=e.getSelection())||void 0===n||n.removeAllRanges()}createTempTextArea(t,e){const n="rtl"===t.documentElement.getAttribute("dir");let c;return c=t.createElement("textarea"),c.style.fontSize="12pt",c.style.border="0",c.style.padding="0",c.style.margin="0",c.style.position="absolute",c.style[n?"right":"left"]="-9999px",c.style.top=(e.pageYOffset||t.documentElement.scrollTop)+"px",c.setAttribute("readonly",""),c}pushCopyResponse(t){this.copySubject.next(t)}pushCopyReponse(t){this.pushCopyResponse(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Vb(c.d),i.Vb(r,8))},t.\u0275prov=Object(i.Hb)({factory:function(){return new t(Object(i.Vb)(c.d),Object(i.Vb)(r,8))},token:t,providedIn:"root"}),t})(),l=(()=>{class t{constructor(t){this.clipboardSrv=t,this.cbOnSuccess=new i.n,this.cbOnError=new i.n}ngOnInit(){}ngOnDestroy(){this.clipboardSrv.destroy(this.container)}onClick(t){this.clipboardSrv.isSupported?this.targetElm&&this.clipboardSrv.isTargetValid(this.targetElm)?this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm),this.targetElm.value,t):this.cbContent&&this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent,this.container),this.cbContent,t):this.handleResult(!1,void 0,t)}handleResult(t,e,n){let c={isSuccess:t,event:n};t?(c=Object.assign(c,{content:e,successMessage:this.cbSuccessMsg}),this.cbOnSuccess.emit(c)):this.cbOnError.emit(c),this.clipboardSrv.pushCopyResponse(c)}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(s))},t.\u0275dir=i.Gb({type:t,selectors:[["","ngxClipboard",""]],hostBindings:function(t,e){1&t&&i.Zb("click",(function(t){return e.onClick(t.target)}))},inputs:{targetElm:["ngxClipboard","targetElm"],container:"container",cbContent:"cbContent",cbSuccessMsg:"cbSuccessMsg"},outputs:{cbOnSuccess:"cbOnSuccess",cbOnError:"cbOnError"}}),t})(),a=(()=>{class t{}return t.\u0275mod=i.Jb({type:t}),t.\u0275inj=i.Ib({factory:function(e){return new(e||t)},imports:[[c.c]]}),t})()},MffP:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n("fXoL"),i=n("rGdz"),r=n("ofXK"),o=n("8MG2"),s=n("Dvla");function l(t,e){if(1&t&&(c.Rb(0,"clr-alert",2),c.Rb(1,"clr-alert-item"),c.Rb(2,"span",3),c.Dc(3),c.Qb(),c.Rb(4,"div",4),c.Rb(5,"button",5),c.Dc(6,"COPY"),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&t){const t=e.$implicit;c.hc("clrAlertClosable",!1)("clrAlertType",t.result&&!t.result.error?"info":"warning")("clrAlertAppLevel",!0),c.zb(3),c.Fc(" ",t.body.content.length>57?t.body.content.slice(0,57)+"...":t.body.content," "),c.zb(2),c.hc("cbContent",t.body.content)}}let a=(()=>{class t{constructor(t){this.history=t,this.queries=[],this.pageSize=25}ngOnInit(){this.queriesSubscription=this.history.history.subscribe({next:t=>this.queries=t})}ngOnDestroy(){this.queriesSubscription.unsubscribe()}onDeleteHistory(){this.history.deleteHistory()}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-history-list"]],inputs:{pageSize:"pageSize"},decls:2,vars:1,consts:[[2,"height","85%","overflow-y","auto"],[3,"clrAlertClosable","clrAlertType","clrAlertAppLevel",4,"ngFor","ngForOf"],[3,"clrAlertClosable","clrAlertType","clrAlertAppLevel"],[1,"alert-text"],[1,"alert-actions"],["ngxClipboard","",1,"btn","alert-action",3,"cbContent"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Bc(1,l,7,5,"clr-alert",1),c.Qb()),2&t&&(c.zb(1),c.hc("ngForOf",e.queries))},directives:[r.o,o.b,o.c,o.d,s.a],styles:[".alert-info{background-color:rgba(74,174,217,.38823529411764707)!important}"]}),t})()},Mkpm:function(t,e){t.exports=i,t.exports.parse=i,t.exports.stringify=function t(e){function n(t){return t.join(" ")}function c(t){return t.map(n).join(", ")}function i(t){return t.map(c).map(r).join(", ")}function r(t){return"("+t+")"}switch("Feature"===e.type&&(e=e.geometry),e.type){case"Point":return"POINT ("+n(e.coordinates)+")";case"LineString":return"LINESTRING ("+c(e.coordinates)+")";case"Polygon":return"POLYGON ("+i(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+c(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+e.coordinates.map(i).map(r).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+i(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(t).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var n=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,c=new RegExp("^"+n.source+"(\\s"+n.source+"){1,}");function i(t){var e,n=t.split(";"),i=n.pop(),r=(n.shift()||"").split("=").pop(),o=0;function s(t){var e=i.substring(o).match(t);return e?(o+=e[0].length,e[0]):null}function l(){s(/^\s*/)}function a(){l();for(var t,e=0,n=[],i=[n],r=n;t=s(/^(\()/)||s(/^(\))/)||s(/^(,)/)||s(c);){if("("===t)i.push(r),i[i.length-1].push(r=[]),e++;else if(")"===t){if(0===r.length)return null;if(!(r=i.pop()))return null;if(0==--e)break}else if(","===t)i[i.length-1].push(r=[]);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(r,t.split(/\s/g).map(parseFloat))}l()}return 0!==e?null:n}function b(){for(var t,e,n=[];e=s(c)||s(/^(,)/);)","===e?(n.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),l();return t?(n.push(t),n.length?n:null):null}return(e=function t(){return function(){if(!s(/^(point(\sz)?)/i))return null;if(l(),!s(/^(\()/))return null;var t=b();return t?(l(),s(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!s(/^(linestring(\sz)?)/i))return null;if(l(),!s(/^(\()/))return null;var t=b();return t&&s(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!s(/^(polygon(\sz)?)/i))return null;l();var t=a();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!s(/^(multipoint)/i))return null;l();var t=i.substring(i.indexOf("(")+1,i.length-1).replace(/\(/g,"").replace(/\)/g,"");i="MULTIPOINT ("+t+")";var e=a();return e?(l(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!s(/^(multilinestring)/i))return null;l();var t=a();return t?(l(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!s(/^(multipolygon)/i))return null;l();var t=a();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){var e,n=[];if(!s(/^(geometrycollection)/i))return null;if(l(),!s(/^(\()/))return null;for(;e=t();)n.push(e),l(),s(/^(,)/),l();return s(/^(\))/)?{type:"GeometryCollection",geometries:n}:null}()}())&&r.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+r}}),e}},OcyY:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var c=n("fXoL"),i=n("WZmd"),r=n("ws30"),o=n("ofXK"),s=n("8MG2");function l(t,e){if(1&t&&(c.Rb(0,"clr-tree-node"),c.Dc(1),c.Qb()),2&t){const t=e.$implicit;c.zb(1),c.Gc(" ",t.key," [",t.value.type,"] ")}}function a(t,e){if(1&t&&(c.Rb(0,"clr-tree-node"),c.Dc(1),c.Bc(2,l,2,2,"clr-tree-node",5),c.cc(3,"keyvalue"),c.Qb()),2&t){const t=e.$implicit;c.zb(1),c.Fc(" ",t.key," "),c.zb(1),c.hc("ngForOf",c.dc(3,2,t.value))}}function b(t,e){if(1&t&&(c.Rb(0,"clr-tree-node",3),c.Mb(1,"clr-icon",4),c.Dc(2),c.Bc(3,a,4,4,"clr-tree-node",5),c.cc(4,"keyvalue"),c.Qb()),2&t){const t=e.$implicit;c.hc("clrExpanded","public"===t.key),c.zb(2),c.Fc(" ",t.key," "),c.zb(1),c.hc("ngForOf",c.dc(4,3,t.value))}}function u(t,e){if(1&t&&(c.Rb(0,"clr-tree"),c.Bc(1,b,5,5,"clr-tree-node",2),c.cc(2,"keyvalue"),c.Qb()),2&t){const t=c.bc();c.zb(1),c.hc("ngForOf",c.dc(2,1,t.tree))}}function p(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",6),c.Rb(1,"div",7),c.Rb(2,"div"),c.Rb(3,"i"),c.Dc(4,"The backend is not securely connected\xa0"),c.Qb(),c.Rb(5,"button",8),c.Zb("click",(function(){return c.rc(t),c.bc().connectBackend()})),c.Dc(6,"click here to connect"),c.Qb(),c.Qb(),c.Qb(),c.Qb()}}let d=(()=>{class t{constructor(t,e){this.settings=t,this.exerciseService=e,this.isOnline=!1,this.sql="select table_schema as schema, table_name as table, column_name as column, data_type as type from information_schema.columns where table_schema not in ('pg_catalog', 'information_schema')",this.tree={}}ngOnInit(){this.backendSubscription=this.settings.isConnected.subscribe({next:t=>{this.isOnline=t,this.isOnline&&this.getSchemaInformation()}})}ngOnDestroy(){this.backendSubscription.unsubscribe()}connectBackend(){this.settings.requestBackendConnect()}getSchemaInformation(){const t={};this.exerciseService.executeSql(this.sql).then(e=>{e.data&&(e.data.forEach(e=>{t[e.schema]||(t[e.schema]={}),t[e.schema][e.table]||(t[e.schema][e.table]={}),t[e.schema][e.table][e.column]={name:e.column,type:e.type}}),this.tree=t,console.log(t))})}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(i.a),c.Lb(r.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-schema-inspector"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notConnected",""],[3,"clrExpanded",4,"ngFor","ngForOf"],[3,"clrExpanded"],["shape","folder"],[4,"ngFor","ngForOf"],[1,"clr-row"],[1,"clr-row-12",2,"display","flex","flex-direction","column","justify-content","center","height","100%","text-align","center"],[1,"btn","btn-link",3,"click"]],template:function(t,e){if(1&t&&(c.Bc(0,u,3,3,"clr-tree",0),c.Bc(1,p,7,0,"ng-template",null,1,c.Cc)),2&t){const t=c.nc(2);c.hc("ngIf",e.isOnline)("ngIfElse",t)}},directives:[o.p,s.W,o.o,s.X,s.x],pipes:[o.j],styles:[""]}),t})()},"SS/w":function(t,e,n){"use strict";n.d(e,"a",(function(){return X}));var c=n("fXoL"),i=n("8MG2"),r=n("ofXK"),o=n("LvDl"),s=n("Mkpm"),l=n("3Pt+"),a=n("u3+B"),b=n("R9Cn");function u(t,e){1&t&&c.Mb(0,"clr-spinner")}const p=function(){return{position:"relative",width:"100%",height:"450px"}};function d(t,e){if(1&t&&(c.Pb(0),c.Mb(1,"plotly-plot",21),c.Ob()),2&t){const t=c.bc(2);c.zb(1),c.xc(c.kc(5,p)),c.hc("data",t.axes)("layout",t.layout)("useResizeHandler",!0)}}function h(t,e){1&t&&(c.Rb(0,"div",22),c.Rb(1,"i"),c.Dc(2,"First select a plot type and specify the axes"),c.Qb(),c.Qb())}function g(t,e){if(1&t&&(c.Rb(0,"option",23),c.Dc(1),c.Qb()),2&t){const t=e.$implicit;c.hc("value",t),c.zb(1),c.Ec(t)}}function f(t,e){1&t&&(c.Rb(0,"label"),c.Dc(1,"x-axis attribute"),c.Qb())}function m(t,e){1&t&&(c.Rb(0,"label"),c.Dc(1,"Geometry attribute"),c.Qb())}const y=function(t){return[t]};function R(t,e){if(1&t&&(c.Rb(0,"option",23),c.Dc(1),c.Qb()),2&t){const t=e.$implicit;c.hc("value",c.lc(2,y,t)),c.zb(1),c.Ec(t)}}function x(t,e){if(1&t){const t=c.Sb();c.Rb(0,"clr-select-container"),c.Bc(1,f,2,0,"label",11),c.Bc(2,m,2,0,"label",11),c.Rb(3,"select",24),c.Zb("ngModelChange",(function(e){return c.rc(t),c.bc(2).selectedXAttribute=e}))("change",(function(){return c.rc(t),c.bc(2).onXAxisChanged()})),c.Bc(4,R,2,4,"option",10),c.Qb(),c.Qb()}if(2&t){const t=c.bc(2);c.zb(1),c.hc("ngIf","map"!==t.selectedPlotType),c.zb(1),c.hc("ngIf","map"===t.selectedPlotType),c.zb(1),c.hc("ngModel",t.selectedXAttribute),c.zb(1),c.hc("ngForOf",t.xAxisAttributeOptions)}}function Q(t,e){1&t&&(c.Rb(0,"label"),c.Dc(1,"y-axis attributes"),c.Qb())}function v(t,e){1&t&&(c.Rb(0,"label"),c.Dc(1,"property"),c.Qb())}function z(t,e){if(1&t&&(c.Rb(0,"option",23),c.Dc(1),c.Qb()),2&t){const t=e.$implicit;c.hc("value",c.lc(2,y,t)),c.zb(1),c.Ec(t)}}function D(t,e){if(1&t){const t=c.Sb();c.Rb(0,"clr-select-container"),c.Bc(1,Q,2,0,"label",11),c.Bc(2,v,2,0,"label",11),c.Rb(3,"select",25),c.Zb("ngModelChange",(function(e){return c.rc(t),c.bc(2).selectedYAttribute=e})),c.Bc(4,z,2,4,"option",10),c.Qb(),c.Qb()}if(2&t){const t=c.bc(2);c.zb(1),c.hc("ngIf","map"!==t.selectedPlotType),c.zb(1),c.hc("ngIf","map"===t.selectedPlotType),c.zb(1),c.hc("ngModel",t.selectedYAttribute),c.zb(1),c.hc("ngForOf",t.yAxisAttributeOptions)}}function C(t,e){if(1&t){const t=c.Sb();c.Rb(0,"button",17),c.Zb("click",(function(){c.rc(t);const n=e.$implicit,i=c.bc(2).$implicit;return c.bc(3).onChangeSizeFromData(i,n)})),c.Dc(1),c.Qb()}if(2&t){const t=e.$implicit;c.zb(1),c.Fc(" ",t," ")}}function O(t,e){if(1&t&&(c.Rb(0,"clr-dropdown"),c.Rb(1,"button",14),c.Rb(2,"clr-icon",32),c.Dc(3,"SIZE"),c.Qb(),c.Qb(),c.Rb(4,"clr-dropdown-menu",16),c.Bc(5,C,2,1,"button",33),c.Qb(),c.Qb()),2&t){const t=c.bc(4);c.zb(5),c.hc("ngForOf",t.xAxisAttributeOptions)}}const w=function(){return["scatter","map"]};function A(t,e){if(1&t){const t=c.Sb();c.Rb(0,"li",28),c.Rb(1,"div",29),c.Rb(2,"span"),c.Dc(3),c.Qb(),c.Rb(4,"div"),c.Bc(5,O,6,1,"clr-dropdown",11),c.Rb(6,"clr-icon",30),c.Zb("colorPickerChange",(function(n){return c.rc(t),e.$implicit.color=n}))("colorPickerChange",(function(){c.rc(t);const n=e.index;return c.bc(3).onColorChange(n)})),c.Qb(),c.Rb(7,"clr-icon",31),c.Zb("click",(function(){c.rc(t);const n=e.index;return c.bc(3).onRemoveAxis(n)})),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&t){const t=e.$implicit,n=c.bc(3);c.zb(2),c.yc("color",t.color),c.zb(1),c.Ec(t.name),c.zb(2),c.hc("ngIf",c.kc(7,w).includes(n.selectedPlotType)),c.zb(1),c.yc("color",t.color),c.hc("colorPicker",t.color)}}function S(t,e){if(1&t&&(c.Rb(0,"div",6),c.Rb(1,"div",7),c.Dc(2,"Datasets"),c.Qb(),c.Rb(3,"ul",26),c.Bc(4,A,8,8,"li",27),c.Qb(),c.Qb()),2&t){const t=c.bc(2);c.zb(4),c.hc("ngForOf",t.axesLabel)}}function T(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",2),c.Rb(1,"div",3),c.Bc(2,d,2,6,"ng-container",0),c.Bc(3,h,3,0,"ng-template",null,4,c.Cc),c.Qb(),c.Rb(5,"div",5),c.Rb(6,"div",6),c.Rb(7,"div",7),c.Dc(8,"Add Data"),c.Qb(),c.Rb(9,"div",8),c.Rb(10,"clr-select-container"),c.Rb(11,"label"),c.Dc(12,"Plot type"),c.Qb(),c.Rb(13,"select",9),c.Zb("ngModelChange",(function(e){return c.rc(t),c.bc().selectedPlotType=e}))("change",(function(){return c.rc(t),c.bc().onPlotTypeChanged()})),c.Bc(14,g,2,2,"option",10),c.Qb(),c.Qb(),c.Bc(15,x,5,4,"clr-select-container",11),c.Bc(16,D,5,4,"clr-select-container",11),c.Qb(),c.Rb(17,"div",12),c.Rb(18,"button",13),c.Zb("click",(function(){return c.rc(t),c.bc().onAddYAxis()})),c.Dc(19," Add "),c.Qb(),c.Rb(20,"clr-dropdown"),c.Rb(21,"button",14),c.Mb(22,"clr-icon",15),c.Dc(23," Options "),c.Qb(),c.Rb(24,"clr-dropdown-menu",16),c.Rb(25,"button",17),c.Zb("click",(function(){c.rc(t);const e=c.bc();return e.layout.showlegend=!e.layout.showlegend})),c.Dc(26),c.Qb(),c.Rb(27,"clr-dropdown"),c.Rb(28,"button",18),c.Dc(29,"Map Style"),c.Qb(),c.Rb(30,"clr-dropdown-menu",19),c.Rb(31,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().onChangeMapStyle("carto-darkmatter")})),c.Dc(32,"dark"),c.Qb(),c.Rb(33,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().onChangeMapStyle("carto-positron")})),c.Dc(34,"light"),c.Qb(),c.Rb(35,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().onChangeMapStyle("open-street-map")})),c.Dc(36,"OSM"),c.Qb(),c.Rb(37,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().onChangeMapStyle("stamen-terrain")})),c.Dc(38,"Terrain"),c.Qb(),c.Qb(),c.Qb(),c.Rb(39,"clr-dropdown"),c.Rb(40,"button",18),c.Dc(41,"Bar Type"),c.Qb(),c.Rb(42,"clr-dropdown-menu",19),c.Rb(43,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().layout.barmode="group"})),c.Dc(44,"single"),c.Qb(),c.Rb(45,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().layout.barmode="stack"})),c.Dc(46,"stacked"),c.Qb(),c.Rb(47,"button",17),c.Zb("click",(function(){return c.rc(t),c.bc().layout.barmode="relative"})),c.Dc(48,"relative"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Bc(49,S,5,1,"div",20),c.Qb(),c.Qb()}if(2&t){const t=c.nc(4),e=c.bc();c.zb(2),c.hc("ngIf",e.axes.length>0)("ngIfElse",t),c.zb(11),c.hc("ngModel",e.selectedPlotType),c.zb(1),c.hc("ngForOf",e.plotTypes),c.zb(1),c.hc("ngIf",e.selectedPlotType),c.zb(1),c.hc("ngIf",e.selectedPlotType&&e.selectedXAttribute),c.zb(2),c.hc("disabled","map"!==e.selectedPlotType&&!e.selectedYAttribute),c.zb(8),c.Fc(" ",e.layout.showlegend?"hide":"show"," legend "),c.zb(2),c.hc("disabled","map"!==e.selectedPlotType),c.zb(12),c.hc("disabled","bar"!==e.selectedPlotType),c.zb(9),c.hc("ngIf",e.axes.length>0)}}function M(t){return t&&"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t)}const I={line:"scatter",scatter:"scatter",bar:"bar",histogram:"bar"},E={line:"lines+markers",scatter:"markers"};let k=(()=>{class t{constructor(){this.attributeNames=[],this.allAttributes=[],this.axesLabel=[],this.axes=[],this.layout={autosize:!0,plot_bgcolor:"#1A2A32",paper_bgcolor:"#1A2A32",barmode:"stack",showlegend:!1,font:{size:18,color:"#fff"},mapbox:{style:"carto-darkmatter",pitch:25}},this.plotTypes=[],this.xAxisAttributeOptions=[],this.yAxisAttributeOptions=[],this.loading=!0}set data(t){this.rawData=t,this.extractAttributes()}ngOnInit(){}onPlotTypeChanged(){this.axes=[],"line"!==this.selectedPlotType&&"bar"!==this.selectedPlotType||(this.xAxisAttributeOptions=this.allAttributes.filter(t=>["numeric","datetime","text"].includes(t.type)).map(t=>t.name),this.yAxisAttributeOptions=this.allAttributes.filter(t=>"numeric"===t.type).map(t=>t.name)),"scatter"===this.selectedPlotType&&(this.xAxisAttributeOptions=this.allAttributes.filter(t=>"numeric"===t.type).map(t=>t.name),this.yAxisAttributeOptions=this.allAttributes.filter(t=>"numeric"===t.type).map(t=>t.name)),"map"===this.selectedPlotType?(this.xAxisAttributeOptions=this.allAttributes.filter(t=>["lonLat","linestring","polygon"].includes(t.type)).map(t=>t.name),this.yAxisAttributeOptions=this.allAttributes.filter(t=>"numeric"===t.type).map(t=>t.name),this.layout.margin={t:0,b:0,l:0,r:0}):this.layout.margin=null,this.selectedXAttribute=null,this.selectedYAttribute=null}onColorChange(t){const e=this.axesLabel[t].color;this.axesLabel[t].idx.forEach(t=>{this.axes[t].marker.color=e,this.axes[t].marker.fillcolor&&(this.axes[t].marker.fillcolor=e)})}onChangeSizeFromData(t,e){const n=this.allAttributes.find(t=>t.name===e),c=n?[...n.data]:null;this.axesLabel[t].idx.forEach(t=>{this.axes[t].marker.size=c})}convertMapLayer(t,e){if("lonLat"===t.type){const n={name:e?e.name:t.name,lon:[...t.data.map(t=>t.coordinates[0])],lat:[...t.data.map(t=>t.coordinates[1])],type:"scattermapbox",mode:"lonLat"===t.type?"markers":"lines"};return e&&(n.text=e.data.map(t=>String(t)),Object(o.isNumber)(e.data[0])&&(n.z=[...e.data])),[n]}if("linestring"===t.type){const n=[];return t.data.forEach((c,i)=>{const r={type:"scattermapbox",name:e?e.name:t.name,lon:[...c.coordinates.map(t=>t[0])],lat:[...c.coordinates.map(t=>t[1])],marker:{size:12,color:"cyan"},mode:"lines",z:e&&Object(o.isNumber)(e.data[i])?e.data[i]:null,text:e?e.data[i]:null};n.push(r)}),n}return[{type:"choroplethmapbox",z:e?[...e.data]:[...t.data.map(t=>1)],locations:[...t.data.map((t,e)=>e)],geojson:Object(o.cloneDeep)({type:"FeatureCollection",features:[...t.data.map((t,e)=>({type:"Feature",id:e,geometry:Object.assign({},t)}))]})}]}onXAxisChanged(){const t=this.allAttributes.find(t=>t.name===this.selectedXAttribute);if(t&&"map"!==this.selectedPlotType){const e=this.axes.map(e=>Object.assign(Object.assign({},e),{x:[...t.data]}));this.axes=Object(o.cloneDeep)(e)}}onAddYAxis(){const t=this.allAttributes.find(t=>t.name===this.selectedYAttribute),e=this.allAttributes.find(t=>t.name===this.selectedXAttribute);if("map"===this.selectedPlotType){const n=this.convertMapLayer(e,t),c=this.axes.length-1,i=n.map((t,e)=>c+(e+1));this.axes=[...this.axes,...n],this.axesLabel.push({name:t?t.name:e.name,color:"cyan",idx:[...i]}),console.log(this.axes)}else if(t&&e){const n={x:[...e.data],y:[...t.data],type:I[this.selectedPlotType],mode:E[this.selectedPlotType],name:t.name,marker:{color:"cyan"}};this.axes=[...this.axes,n],this.axesLabel.push({name:t.name,color:"cyan",idx:[this.axes.length-1]})}}onRemoveAxis(t){const e=this.axesLabel[t],n=this.axes.filter((t,n)=>!e.idx.includes(n));this.axes=Object(o.cloneDeep)(n),this.axesLabel.splice(t,1)}getAllowedPlotTypes(){this.plotTypes=[];const t=Object(o.sum)(this.allAttributes.map(t=>"numeric"===t.type?1:0)),e=Object(o.sum)(this.allAttributes.map(t=>"datetime"===t.type?1:0)),n=Object(o.sum)(this.allAttributes.map(t=>"text"===t.type?1:0)),c=Object(o.sum)(this.allAttributes.map(t=>["lonLat","linestring","polygon"].includes(t.type)?1:0));(t>=2||e>=1&&t>=1||n>=1&&t>=1)&&(this.plotTypes.push("line"),this.plotTypes.push("bar")),t>=2&&this.plotTypes.push("scatter"),c>=1&&this.plotTypes.push("map"),this.loading=!1}extractAttributes(){this.loading=!0,this.attributeNames=[],this.allAttributes=[];const t=this.rawData[0];Object.keys(t).forEach(e=>{if(!this.attributeNames.includes(e)){const n=this.inferAttributeType(t,e);if(n){this.attributeNames.push(e);const t={name:e,type:n,data:[]};this.allAttributes.push(Object(o.cloneDeep)(t))}}}),this.allAttributes.forEach(t=>{if("datetime"===t.type)t.data=[...this.rawData.map(e=>new Date(e[t.name]))];else if(["lonLat","linestring","polygon"].includes(t.type)){const e=[...this.rawData.map(e=>s.parse(e[t.name]))];console.log(e),t.data=e}else t.data=[...this.rawData.map(e=>e[t.name])]}),this.getAllowedPlotTypes()}inferAttributeType(t,e){const n=t[e];return"number"==typeof n?"numeric":"string"==typeof n?n.includes("POINT")?"lonLat":n.includes("LINESTRING")?"linestring":n.includes("POLYGON")?"polygon":M(new Date(n))?"datetime":"text":"object"==typeof n&&M(n)?"datetime":null}onChangeMapStyle(t){this.layout=Object.assign(Object.assign({},this.layout),{mapbox:Object.assign(Object.assign({},this.layout.mapbox),{style:t})})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["app-result-plot"]],inputs:{data:"data"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["plot",""],[1,"clr-row"],[1,"clr-col-md-9","clr-col-sm-12"],["noPlot",""],[1,"clr-col-md-3","clr-col-sm-12"],[1,"card"],[1,"card-header"],[1,"card-block","select-block"],["clrSelect","","name","plotType",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"card-footer"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],["clrDropdownTrigger","",1,"btn","btn-link"],["shape","caret","direction","right"],["clrPosition","left"],["clrDropdownItem","",3,"click"],["clrDropdownTrigger","",3,"disabled"],["clrPosition","bottom-left"],["class","card",4,"ngIf"],[3,"data","layout","useResizeHandler"],[2,"width","100%","height","450%","display","flex","flex-direction","column","justify-content","center","text-align","center"],[3,"value"],["clrSelect","","name","xAxis",3,"ngModel","ngModelChange","change"],["clrSelect","","name","yAxis",3,"ngModel","ngModelChange"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[2,"display","flex","flex-direction","row","justify-content","space-between"],["shape","color-palette",1,"is-solid",3,"colorPicker","colorPickerChange"],["shape","times",2,"cursor","pointer",3,"click"],["shape","caret","dir","up"],["clrDropdownItem","",3,"click",4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(c.Bc(0,u,1,0,"clr-spinner",0),c.Bc(1,T,50,11,"ng-template",null,1,c.Cc)),2&t){const t=c.nc(2);c.hc("ngIf",e.loading)("ngIfElse",t)}},directives:[r.p,i.N,i.M,i.C,l.q,i.L,l.j,l.l,r.o,i.s,i.v,i.x,i.u,i.t,a.a,l.n,l.s,b.a],styles:[""]}),t})();function L(t,e){if(1&t&&(c.Rb(0,"clr-dg-column",6),c.Dc(1),c.Qb()),2&t){const t=e.$implicit;c.hc("clrDgField",t),c.zb(1),c.Ec(t)}}function P(t,e){if(1&t&&(c.Rb(0,"clr-dg-cell"),c.Dc(1),c.Qb()),2&t){const t=e.$implicit,n=c.bc().$implicit;c.zb(1),c.Ec(n[t])}}function F(t,e){if(1&t&&(c.Rb(0,"clr-dg-row"),c.Bc(1,P,2,1,"clr-dg-cell",7),c.Qb()),2&t){const t=c.bc(2);c.zb(1),c.hc("ngForOf",t.resultColumns)}}function q(t,e){if(1&t&&(c.Rb(0,"clr-dg-pagination",8,9),c.Dc(2),c.Qb()),2&t){const t=c.bc(2);c.hc("clrDgTotalItems",t.res.data.length),c.zb(2),c.Gc(" Total: ",t.res.data.length," row",t.res.data.length>0?"s":""," ")}}function j(t,e){if(1&t&&(c.Rb(0,"clr-tab"),c.Rb(1,"button",1),c.Dc(2,"Data"),c.Qb(),c.Rb(3,"clr-tab-content"),c.Rb(4,"clr-datagrid",2),c.Bc(5,L,2,2,"clr-dg-column",3),c.Bc(6,F,2,1,"clr-dg-row",4),c.Rb(7,"clr-dg-footer"),c.Bc(8,q,3,3,"clr-dg-pagination",5),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&t){const t=c.bc();c.zb(4),c.hc("clrDgLoading",t.loading),c.zb(1),c.hc("ngForOf",t.resultColumns),c.zb(1),c.hc("clrDgItemsOf",t.res.data),c.zb(2),c.hc("ngIf",!t.loading)}}function B(t,e){if(1&t&&(c.Rb(0,"clr-tab"),c.Rb(1,"button",1),c.Dc(2,"Analyse"),c.Qb(),c.Rb(3,"clr-tab-content"),c.Rb(4,"code"),c.Mb(5,"pre",10),c.Qb(),c.Qb(),c.Qb()),2&t){const t=c.bc();c.zb(5),c.hc("innerHTML",t.res.explain,c.sc)}}function N(t,e){if(1&t&&(c.Rb(0,"clr-tab-content"),c.Mb(1,"app-result-plot",12),c.Qb()),2&t){const t=c.bc(2);c.zb(1),c.hc("data",t.res.data)}}function G(t,e){1&t&&(c.Rb(0,"clr-tab"),c.Rb(1,"button",1),c.Dc(2,"Plot"),c.Qb(),c.Bc(3,N,2,1,"clr-tab-content",11),c.Qb())}function Z(t,e){if(1&t&&(c.Rb(0,"clr-tab"),c.Rb(1,"button",1),c.Dc(2,"Performance"),c.Qb(),c.Rb(3,"clr-tab-content"),c.Rb(4,"clr-datagrid"),c.Rb(5,"clr-dg-column"),c.Dc(6,"Measure"),c.Qb(),c.Rb(7,"clr-dg-column"),c.Dc(8,"Value"),c.Qb(),c.Rb(9,"clr-dg-row"),c.Rb(10,"clr-dg-cell"),c.Dc(11,"Execution Time"),c.Qb(),c.Rb(12,"clr-dg-cell"),c.Dc(13),c.Qb(),c.Qb(),c.Rb(14,"clr-dg-row"),c.Rb(15,"clr-dg-cell"),c.Dc(16,"Backend Time"),c.Qb(),c.Rb(17,"clr-dg-cell"),c.Dc(18),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&t){const t=c.bc();c.zb(13),c.Ec(t.res.perf.executionTime),c.zb(5),c.Ec(t.res.perf.backendTime)}}let X=(()=>{class t{constructor(){this.loading=!0,this.resultColumns=[]}set result(t){this.loading=!0,this.res=t,this.getResultColumns()}ngOnInit(){}getResultColumns(){this.resultColumns=[],this.res.data.forEach(t=>{Object.keys(t).forEach(t=>{this.resultColumns.includes(t)||this.resultColumns.push(t)}),this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Fb({type:t,selectors:[["app-sql-result"]],inputs:{result:"result",explain:"explain"},decls:5,vars:4,consts:[[4,"ngIf"],["clrTabLink",""],[3,"clrDgLoading"],[3,"clrDgField",4,"ngFor","ngForOf"],[4,"clrDgItems","clrDgItemsOf"],[3,"clrDgTotalItems",4,"ngIf"],[3,"clrDgField"],[4,"ngFor","ngForOf"],[3,"clrDgTotalItems"],["pagination",""],[3,"innerHTML"],[4,"clrIfActive"],[3,"data"]],template:function(t,e){1&t&&(c.Rb(0,"clr-tabs"),c.Bc(1,j,9,4,"clr-tab",0),c.Bc(2,B,6,1,"clr-tab",0),c.Bc(3,G,4,0,"clr-tab",0),c.Bc(4,Z,19,2,"clr-tab",0),c.Qb()),2&t&&(c.zb(1),c.hc("ngIf",e.res),c.zb(1),c.hc("ngIf",e.res&&e.res.explain),c.zb(1),c.hc("ngIf",e.res&&e.res.data&&e.res.data.length>1),c.zb(1),c.hc("ngIf",e.res))},directives:[i.R,i.ib,r.p,i.O,i.Q,i.bb,i.P,i.h,i.eb,i.gb,i.ab,i.hb,r.o,i.o,i.n,i.j,i.db,i.r,i.fb,i.i,i.cb,i.q,i.y,k],styles:["pre[_ngcontent-%COMP%]{padding:.6rem}clr-datagrid[_ngcontent-%COMP%]{height:auto!important}"]}),t})()},aPRB:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var c=n("ofXK"),i=n("8MG2"),r=n("Dvla"),o=n("fXoL");let s=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[c.c,i.a,r.b]]}),t})()},hxDo:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n("ofXK"),i=n("8MG2"),r=n("fXoL");let o=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[c.c,i.a]]}),t})()}}]);