(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{wJ9R:function(e,t,s){"use strict";s.r(t),s.d(t,"ExercisePageModule",(function(){return L}));var n=s("ofXK"),i=s("fXoL"),c=s("ws30"),o=s("tyNb");function r(e,t){1&e&&(i.Nb(0),i.Pb(1,"span"),i.zc(2," No active track"),i.Ob(),i.Mb())}const b=function(e){return["/","e",e]};function l(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"button",3),i.zc(2," Next "),i.Pb(3,"span",4),i.zc(4),i.Ob(),i.Ob(),i.Mb()),2&e){const e=i.Yb(2);i.yb(1),i.dc("routerLink",i.hc(3,b,e.nextExericse.id))("ngClass",e.btnClasses),i.yb(3),i.Bc(" Next up: ",e.nextExericse.name," ")}}function u(e,t){if(1&e&&(i.Pb(0,"button",5),i.zc(1," Next "),i.Pb(2,"span",4),i.zc(3),i.Ob(),i.Ob()),2&e){const e=i.Yb(2);i.dc("disabled",!0)("ngClass",e.btnClasses),i.yb(3),i.Cc(" This was the last ",e.onlyUnsolved?"unsolved ":""," exercise ","all"===e.session?"on this track":"in this session",".")}}function a(e,t){if(1&e&&(i.xc(0,l,5,5,"ng-container",0),i.xc(1,u,4,4,"ng-template",null,2,i.yc)),2&e){const e=i.jc(2),t=i.Yb();i.dc("ngIf",t.nextExericse)("ngIfElse",e)}}let d=(()=>{class e{constructor(e){this.exerciseService=e,this.session="all",this.onlyUnsolved=!1,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currId=e,this.isSynced&&this.getNext()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.nextExericse||this.getNext()}})}getNext(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){let e;this.onlyUnsolved?e=this.exerciseService.getNextUnsolvedExercise(this.currId,this.session):(e=this.exerciseService.getNextExercise(this.currId,this.session),console.log(e)),this.nextExericse=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(c.a))},e.\u0275cmp=i.Db({type:e,selectors:[["app-next-exercise-button"]],inputs:{exerciseId:"exerciseId",session:"session",onlyUnsolved:"onlyUnsolved",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-left",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(i.xc(0,r,3,0,"ng-container",0),i.xc(1,a,3,2,"ng-template",null,1,i.yc)),2&e){const e=i.jc(2);i.dc("ngIf",!t.hasActiveTrack)("ngIfElse",e)}},directives:[n.o,o.c,n.m],styles:[""]}),e})();var h=s("tk/3");function x(e,t){if(1&e&&(i.Nb(0),i.Kb(1,"div",1),i.Mb()),2&e){const e=i.Yb(2);i.yb(1),i.dc("innerHTML",e.content,i.oc)}}function p(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"p"),i.zc(2),i.Ob(),i.Mb()),2&e){const e=i.Yb(2);i.yb(2),i.Ac(e.content)}}function f(e,t){if(1&e&&(i.Nb(0),i.xc(1,x,2,1,"ng-container",0),i.xc(2,p,3,1,"ng-container",0),i.Mb()),2&e){const e=i.Yb();i.yb(1),i.dc("ngIf","html"===e.body.type),i.yb(1),i.dc("ngIf","text"===e.body.type)}}let g=(()=>{class e{constructor(e){this.http=e}ngOnInit(){this.body&&(this.body.content?this.content=this.body.content:this.loadFromUrl())}loadFromUrl(){this.http.get(this.body.url).subscribe({next:e=>console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(h.a))},e.\u0275cmp=i.Db({type:e,selectors:[["app-exercise-body"]],inputs:{body:"body"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&i.xc(0,f,3,2,"ng-container",0),2&e&&i.dc("ngIf",t.body)},directives:[n.o],styles:[""]}),e})();var y=s("LvDl"),v=s("aLtf"),O=s("+3VT"),I=s("8MG2"),P=s("3Pt+"),M=s("SS/w");function S(e,t){1&e&&(i.Nb(0),i.Pb(1,"div",2),i.Pb(2,"div",3),i.Kb(3,"clr-icon",4),i.Ob(),i.Pb(4,"div",5),i.Pb(5,"p"),i.zc(6,"Your solution is correct."),i.Ob(),i.Ob(),i.Ob(),i.Mb())}function m(e,t){if(1&e){const e=i.Qb();i.Pb(0,"clr-toggle-container"),i.Pb(1,"clr-toggle-wrapper"),i.Pb(2,"input",9),i.Wb("ngModelChange",(function(t){return i.nc(e),i.Yb(2).showHint=t})),i.Ob(),i.Pb(3,"label"),i.zc(4,"show hint"),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.Yb(2);i.yb(2),i.dc("ngModel",e.showHint)}}function w(e,t){if(1&e){const e=i.Qb();i.Nb(0),i.Pb(1,"div",2),i.Pb(2,"div",3),i.Kb(3,"clr-icon",6),i.Ob(),i.Pb(4,"div",5),i.Pb(5,"div",2),i.Pb(6,"div",7),i.Pb(7,"p"),i.zc(8,"Your solution is not yet quite correct"),i.Ob(),i.Ob(),i.Pb(9,"div",8),i.Pb(10,"clr-toggle-container"),i.Pb(11,"clr-toggle-wrapper"),i.Pb(12,"input",9),i.Wb("ngModelChange",(function(t){return i.nc(e),i.Yb().showSolution=t})),i.Ob(),i.Pb(13,"label"),i.zc(14,"show solution"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Pb(15,"div",8),i.xc(16,m,5,1,"clr-toggle-container",1),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Mb()}if(2&e){const e=i.Yb();i.yb(12),i.dc("ngModel",e.showSolution),i.yb(4),i.dc("ngIf",e.exercise.hint)}}function C(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"h3"),i.zc(2,"Hint"),i.Ob(),i.Kb(3,"p",10),i.Mb()),2&e){const e=i.Yb();i.yb(3),i.dc("innerHTML",e.exercise.hint,i.oc)}}function N(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"h3"),i.zc(2,"Solution query"),i.Ob(),i.Pb(3,"pre"),i.Kb(4,"code",10),i.Ob(),i.Mb()),2&e){const e=i.Yb();i.yb(4),i.dc("innerHTML",e.exercise.solution.code?e.exercise.solution.code:e.exercise.solution.content,i.oc)}}function E(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"h3"),i.zc(2,"Your Solution"),i.Ob(),i.Kb(3,"app-sql-result",11),i.Mb()),2&e){const e=i.Yb();i.yb(3),i.dc("result",e.userResult)}}function k(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"h3"),i.zc(2,"Sample Solution"),i.Ob(),i.Kb(3,"app-sql-result",11),i.Mb()),2&e){const e=i.Yb();i.yb(3),i.dc("result",e.solution)}}let Y=(()=>{class e{constructor(e,t){this.exerciseService=e,this.progress=t,this.checked=new i.n,this.explain=!1,this.safeMode=!0,this.solutionCorrect=!1,this.showSolution=!1,this.showHint=!1}ngOnInit(){}onUserInput(e){if(this.userResult=e,this.solution)this.compare();else{const e=this.explain?"text":null;console.log(`Explain: ${e} Safe Mode: ${this.safeMode}`),this.exerciseService.executeSql(this.exercise.solution.content,e,!this.safeMode).then(e=>this.solution=e).then(()=>this.compare()).catch(e=>console.log(e))}}compare(){Object(y.isEqual)(this.userResult.data,this.solution.data)?(this.solutionCorrect=!0,this.showSolution=!0):this.solutionCorrect=!1,this.progress.update(this.exercise.id,this.solutionCorrect).then(()=>{this.checked.emit(this.solutionCorrect)})}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(c.a),i.Jb(v.a))},e.\u0275cmp=i.Db({type:e,selectors:[["app-exercise-compare"]],inputs:{exercise:"exercise"},outputs:{checked:"checked"},decls:7,vars:7,consts:[[3,"safeMode","result","addExplainChange","safeModeChange"],[4,"ngIf"],[1,"clr-row"],[1,"clr-col-4"],["shape","check","size","72"],[1,"clr-col-8"],["shape","times","size","72"],[1,"clr-col-12"],[1,"clr-col-6"],["type","checkbox","clrToggle","",3,"ngModel","ngModelChange"],[3,"innerHTML"],[3,"result"]],template:function(e,t){1&e&&(i.Pb(0,"app-sql-input",0),i.Wb("result",(function(e){return t.onUserInput(e)}))("addExplainChange",(function(e){return t.explain=e}))("safeModeChange",(function(e){return t.safeMode=e})),i.Ob(),i.xc(1,S,7,0,"ng-container",1),i.xc(2,w,17,2,"ng-container",1),i.xc(3,C,4,1,"ng-container",1),i.xc(4,N,5,1,"ng-container",1),i.xc(5,E,4,1,"ng-container",1),i.xc(6,k,4,1,"ng-container",1)),2&e&&(i.dc("safeMode",!t.exercise.disableSafeMode),i.yb(1),i.dc("ngIf",t.solution&&t.solutionCorrect),i.yb(1),i.dc("ngIf",t.solution&&!t.solutionCorrect),i.yb(1),i.dc("ngIf",t.showHint),i.yb(1),i.dc("ngIf",t.showSolution),i.yb(1),i.dc("ngIf",t.userResult),i.yb(1),i.dc("ngIf",t.solution&&t.solutionCorrect))},directives:[O.a,n.o,I.w,I.f,I.g,P.a,I.e,P.i,P.k,I.B,M.a],styles:[""]}),e})();function z(e,t){if(1&e&&(i.Nb(0),i.Pb(1,"div",2),i.Kb(2,"app-next-exercise-button",3),i.Ob(),i.Pb(3,"h1"),i.zc(4),i.Ob(),i.Kb(5,"app-exercise-body",4),i.Kb(6,"app-exercise-compare",5),i.Mb()),2&e){const e=i.Yb();i.yb(2),i.dc("exerciseId",e.exerciseId),i.yb(2),i.Ac(e.exercise.name),i.yb(1),i.dc("body",e.exercise.body),i.yb(1),i.dc("exercise",e.exercise)}}function T(e,t){1&e&&(i.Pb(0,"p"),i.Pb(1,"i"),i.zc(2,"The requested resource could not be loaded. No idea why."),i.Ob(),i.Ob())}let K=(()=>{class e{constructor(e,t){this.exerciseService=e,this.route=t,this.isSynced=!1}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.isSynced&&this.exerciseId&&this.fetchExerciseDoc(this.exerciseId)}}),this.route.paramMap.subscribe({next:e=>{this.exerciseId=e.get("id"),this.isSynced&&this.fetchExerciseDoc(this.exerciseId)}})}fetchExerciseDoc(e){this.exerciseService.getExerciseById(e).then(e=>{this.exercise=e})}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Jb(c.a),i.Jb(o.a))},e.\u0275cmp=i.Db({type:e,selectors:[["app-exercise-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[2,"float","right"],[3,"exerciseId"],[3,"body"],[3,"exercise"]],template:function(e,t){if(1&e&&(i.xc(0,z,7,4,"ng-container",0),i.xc(1,T,3,0,"ng-template",null,1,i.yc)),2&e){const e=i.jc(2);i.dc("ngIf",t.exercise)("ngIfElse",e)}},directives:[n.o,d,g,Y],styles:[""]}),e})();var H=s("sWoP"),D=s("Yv6K");let L=(()=>{class e{}return e.\u0275mod=i.Hb({type:e}),e.\u0275inj=i.Gb({factory:function(t){return new(t||e)},imports:[[n.c,o.f.forChild([{path:":id",component:K}]),H.a,D.a]]}),e})()}}]);