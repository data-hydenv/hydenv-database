(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{wJ9R:function(e,t,s){"use strict";s.r(t),s.d(t,"ExercisePageModule",(function(){return _}));var c=s("ofXK"),i=s("fXoL"),n=s("ws30"),o=s("tyNb"),r=s("aLtf"),l=s("8MG2");function b(e,t){if(1&e&&(i.Rb(0,"clr-timeline-step",6),i.Rb(1,"clr-timeline-step-header"),i.Cc(2,"Not correct"),i.Qb(),i.Rb(3,"clr-timeline-step-description"),i.Cc(4),i.bc(5,"date"),i.Qb(),i.Qb()),2&e){const e=t.$implicit;i.zb(4),i.Dc(i.dc(5,1,e,"dd.MM.yy HH:mm"))}}function a(e,t){if(1&e&&(i.Pb(0),i.Ac(1,b,6,4,"clr-timeline-step",5),i.Ob()),2&e){const e=i.ac(2);i.zb(1),i.gc("ngForOf",e.progress.tries)}}function u(e,t){1&e&&(i.Rb(0,"clr-timeline-step",7),i.Rb(1,"clr-timeline-step-header"),i.Cc(2,"Correct!"),i.Qb(),i.Rb(3,"clr-timeline-step-description"),i.Cc(4,"Well done!"),i.Qb(),i.Qb())}function h(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"clr-timeline",2),i.Ac(2,a,2,1,"ng-container",3),i.Ac(3,u,5,0,"clr-timeline-step",4),i.Qb(),i.Ob()),2&e){const e=i.ac();i.zb(1),i.gc("clrLayout",e.layout),i.zb(1),i.gc("ngIf",e.progress.tries),i.zb(1),i.gc("ngIf",e.progress.correct)}}function g(e,t){if(1&e&&(i.Rb(0,"clr-timeline",2),i.Rb(1,"clr-timeline-step",8),i.Rb(2,"clr-timeline-step-header"),i.Cc(3,"not started"),i.Qb(),i.Rb(4,"clr-timeline-step-description"),i.Cc(5,"No progress data found in the storage of this device"),i.Qb(),i.Qb(),i.Qb()),2&e){const e=i.ac();i.gc("clrLayout",e.layout)}}let p=(()=>{class e{constructor(e){this.progressService=e,this.layout="horizontal"}set exerciseId(e){this.currExerciseId=e,this.extractProgressInfo(this.progressService.progress.getValue())}ngOnInit(){this.progressSubscription=this.progressService.progress.subscribe({next:e=>this.extractProgressInfo(e)})}extractProgressInfo(e){this.progress=e.find(e=>e.exerciseId===this.currExerciseId)}ngOnDestroy(){this.progressSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(r.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-exercise-progress-detail"]],inputs:{exerciseId:"exerciseId",layout:"layout"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noProgress",""],[3,"clrLayout"],[4,"ngIf"],["clrState","success",4,"ngIf"],["clrState","error",4,"ngFor","ngForOf"],["clrState","error"],["clrState","success"],["clrState","not-started"]],template:function(e,t){if(1&e&&(i.Ac(0,h,4,3,"ng-container",0),i.Ac(1,g,6,1,"ng-template",null,1,i.Bc)),2&e){const e=i.mc(2);i.gc("ngIf",t.progress)("ngIfElse",e)}},directives:[c.o,l.R,c.n,l.S,l.U,l.T],pipes:[c.e],styles:[""]}),e})();const d=function(e){return["/","e",e]};function f(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"button",3),i.Cc(2," Back "),i.Rb(3,"span",4),i.Cc(4),i.Qb(),i.Qb(),i.Ob()),2&e){const e=i.ac(2);i.zb(1),i.gc("routerLink",i.kc(3,d,e.previousExercise.id))("ngClass",e.btnClasses),i.zb(3),i.Ec(" Previous: ",e.previousExercise.name," ")}}function x(e,t){if(1&e&&(i.Rb(0,"button",5),i.Cc(1," Back "),i.Rb(2,"span",4),i.Cc(3,"This was the first exercise in the active track."),i.Qb(),i.Qb()),2&e){const e=i.ac(2);i.gc("disabled",!0)("ngClass",e.btnClasses)}}function v(e,t){if(1&e&&(i.Pb(0),i.Ac(1,f,5,5,"ng-container",0),i.Ac(2,x,4,2,"ng-template",null,2,i.Bc),i.Ob()),2&e){const e=i.mc(3),t=i.ac();i.zb(1),i.gc("ngIf",t.previousExercise)("ngIfElse",e)}}function y(e,t){if(1&e&&(i.Rb(0,"button",5),i.Cc(1," Back "),i.Rb(2,"span",4),i.Cc(3,"There is no active Track."),i.Qb(),i.Qb()),2&e){const e=i.ac();i.gc("disabled",!0)("ngClass",e.btnClasses)}}let I=(()=>{class e{constructor(e){this.exerciseService=e,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currentId=e,this.isSynced&&this.getPrevious()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.previousExercise||this.getPrevious()}})}getPrevious(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){const e=this.exerciseService.getPreviousExercise(this.currentId,"all");this.previousExercise=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(n.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-previous-exercise-button"]],inputs:{exerciseId:"exerciseId",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-right",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(i.Ac(0,v,4,2,"ng-container",0),i.Ac(1,y,4,2,"ng-template",null,1,i.Bc)),2&e){const e=i.mc(2);i.gc("ngIf",t.hasActiveTrack)("ngIfElse",e)}},directives:[c.o,o.d,c.m],styles:[""]}),e})();const C=function(e){return["/","e",e]};function m(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"button",3),i.Cc(2," Next "),i.Rb(3,"span",4),i.Cc(4),i.Qb(),i.Qb(),i.Ob()),2&e){const e=i.ac(2);i.zb(1),i.gc("routerLink",i.kc(3,C,e.nextExericse.id))("ngClass",e.btnClasses),i.zb(3),i.Ec(" Next up: ",e.nextExericse.name," ")}}function R(e,t){if(1&e&&(i.Rb(0,"button",5),i.Cc(1," Next "),i.Rb(2,"span",4),i.Cc(3),i.Qb(),i.Qb()),2&e){const e=i.ac(2);i.gc("disabled",!0)("ngClass",e.btnClasses),i.zb(3),i.Fc(" This was the last ",e.onlyUnsolved?"unsolved ":""," exercise ","all"===e.session?"on this track":"in this session",".")}}function S(e,t){if(1&e&&(i.Pb(0),i.Ac(1,m,5,5,"ng-container",0),i.Ac(2,R,4,4,"ng-template",null,2,i.Bc),i.Ob()),2&e){const e=i.mc(3),t=i.ac();i.zb(1),i.gc("ngIf",t.nextExericse)("ngIfElse",e)}}function Q(e,t){if(1&e&&(i.Rb(0,"button",5),i.Cc(1," Next "),i.Rb(2,"span",4),i.Cc(3,"There is no active Track."),i.Qb(),i.Qb()),2&e){const e=i.ac();i.gc("disabled",!0)("ngClass",e.btnClasses)}}let E=(()=>{class e{constructor(e){this.exerciseService=e,this.session="all",this.onlyUnsolved=!1,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currId=e,this.isSynced&&this.getNext()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.nextExericse||this.getNext()}})}getNext(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){let e;this.onlyUnsolved?e=this.exerciseService.getNextUnsolvedExercise(this.currId,this.session):(e=this.exerciseService.getNextExercise(this.currId,this.session),console.log(e)),this.nextExericse=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(n.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-next-exercise-button"]],inputs:{exerciseId:"exerciseId",session:"session",onlyUnsolved:"onlyUnsolved",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-left",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(i.Ac(0,S,4,2,"ng-container",0),i.Ac(1,Q,4,2,"ng-template",null,1,i.Bc)),2&e){const e=i.mc(2);i.gc("ngIf",t.hasActiveTrack)("ngIfElse",e)}},directives:[c.o,o.d,c.m],styles:[""]}),e})();var w=s("tk/3");function M(e,t){if(1&e&&(i.Pb(0),i.Mb(1,"div",1),i.Ob()),2&e){const e=i.ac(2);i.zb(1),i.gc("innerHTML",e.contentText,i.rc)}}function z(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"p"),i.Cc(2),i.Qb(),i.Ob()),2&e){const e=i.ac(2);i.zb(2),i.Dc(e.contentText)}}function T(e,t){if(1&e&&(i.Pb(0),i.Ac(1,M,2,1,"ng-container",0),i.Ac(2,z,3,1,"ng-container",0),i.Ob()),2&e){const e=i.ac();i.zb(1),i.gc("ngIf","html"===e.content.type),i.zb(1),i.gc("ngIf","text"===e.content.type)}}let k=(()=>{class e{constructor(e){this.http=e}set body(e){this.content=e,this.setContentText()}ngOnInit(){this.setContentText()}setContentText(){this.content&&(this.content.content?this.contentText=this.content.content:this.loadFromUrl())}loadFromUrl(){this.http.get(this.content.url).subscribe({next:e=>console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(w.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-exercise-body"]],inputs:{content:"content",body:"body"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&i.Ac(0,T,3,2,"ng-container",0),2&e&&i.gc("ngIf",t.content)},directives:[c.o],styles:[""]}),e})();var A=s("LvDl"),P=s("h+eY"),O=s("+3VT"),L=s("3Pt+"),F=s("SS/w");function H(e,t){1&e&&(i.Pb(0),i.Rb(1,"div",2),i.Rb(2,"div",3),i.Mb(3,"clr-icon",4),i.Qb(),i.Rb(4,"div",5),i.Rb(5,"p"),i.Cc(6,"Your solution is correct."),i.Qb(),i.Qb(),i.Qb(),i.Ob())}function N(e,t){if(1&e){const e=i.Sb();i.Rb(0,"clr-toggle-container"),i.Rb(1,"clr-toggle-wrapper"),i.Rb(2,"input",9),i.Yb("ngModelChange",(function(t){return i.qc(e),i.ac(2).showHint=t})),i.Qb(),i.Rb(3,"label"),i.Cc(4,"show hint"),i.Qb(),i.Qb(),i.Qb()}if(2&e){const e=i.ac(2);i.zb(2),i.gc("ngModel",e.showHint)}}function q(e,t){if(1&e){const e=i.Sb();i.Pb(0),i.Rb(1,"div",2),i.Rb(2,"div",3),i.Mb(3,"clr-icon",6),i.Qb(),i.Rb(4,"div",5),i.Rb(5,"div",2),i.Rb(6,"div",7),i.Rb(7,"p"),i.Cc(8,"Your solution is not yet quite correct"),i.Qb(),i.Qb(),i.Rb(9,"div",8),i.Rb(10,"clr-toggle-container"),i.Rb(11,"clr-toggle-wrapper"),i.Rb(12,"input",9),i.Yb("ngModelChange",(function(t){return i.qc(e),i.ac().showSolution=t})),i.Qb(),i.Rb(13,"label"),i.Cc(14,"show solution"),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Rb(15,"div",8),i.Ac(16,N,5,1,"clr-toggle-container",1),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Ob()}if(2&e){const e=i.ac();i.zb(12),i.gc("ngModel",e.showSolution),i.zb(4),i.gc("ngIf",e.exercise.hint)}}function B(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"h3"),i.Cc(2,"Hint"),i.Qb(),i.Mb(3,"p",10),i.Ob()),2&e){const e=i.ac();i.zb(3),i.gc("innerHTML",e.exercise.hint,i.rc)}}function D(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"h3"),i.Cc(2,"Solution query"),i.Qb(),i.Rb(3,"pre"),i.Mb(4,"code",10),i.Qb(),i.Ob()),2&e){const e=i.ac();i.zb(4),i.gc("innerHTML",e.exercise.solution.code?e.exercise.solution.code:e.exercise.solution.content,i.rc)}}function U(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"h3"),i.Cc(2,"Your Solution"),i.Qb(),i.Mb(3,"app-sql-result",11),i.Ob()),2&e){const e=i.ac();i.zb(3),i.gc("result",e.userResult)}}function Y(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"h3"),i.Cc(2,"Sample Solution"),i.Qb(),i.Mb(3,"app-sql-result",11),i.Ob()),2&e){const e=i.ac();i.zb(3),i.gc("result",e.solution)}}let j=(()=>{class e{constructor(e,t,s){this.exerciseService=e,this.progress=t,this.analytics=s,this.checked=new i.n,this.prefill="",this.explain=!1,this.safeMode=!0,this.solutionCorrect=!1,this.showSolution=!1,this.showHint=!1}set useExercise(e){this.exercise=e,this.setPrefill()}ngOnInit(){this.setPrefill()}setPrefill(){this.prefill=this.exercise&&this.exercise.solution.prefill?this.exercise.solution.prefill:"-- Put your SQL code here.\n-- If you use semicolons, multiple commands or other Queries than SELECT, you have to disable save Mode"}onUserInput(e){if(this.userResult=e,this.solution)this.compare();else{const e=this.explain?"text":null;console.log(`Explain: ${e} Safe Mode: ${this.safeMode}`),this.exerciseService.executeSql(this.exercise.solution.content,e,!this.safeMode).then(e=>this.solution=e).then(()=>this.compare()).catch(e=>console.log(e))}}compare(){Object(A.isEqual)(this.userResult.data,this.solution.data)?(this.solutionCorrect=!0,this.showSolution=!0):this.solutionCorrect=!1,this.progress.update(this.exercise.id,this.solutionCorrect).then(()=>{this.checked.emit(this.solutionCorrect)})}onHintToggle(){this.showHint&&this.analytics.logEvent("exercise_showHint",{exerciseId:this.exercise.id})}onSolutionToggle(){this.showSolution&&this.analytics.logEvent("exercise_showSolution",{exerciseId:this.exercise.id})}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(n.a),i.Lb(r.a),i.Lb(P.c))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-exercise-compare"]],inputs:{useExercise:"useExercise"},outputs:{checked:"checked"},decls:7,vars:8,consts:[[3,"sql","safeMode","result","addExplainChange","safeModeChange"],[4,"ngIf"],[1,"clr-row"],[1,"clr-col-4"],["shape","check","size","72"],[1,"clr-col-8"],["shape","times","size","72"],[1,"clr-col-12"],[1,"clr-col-6"],["type","checkbox","clrToggle","",3,"ngModel","ngModelChange"],[3,"innerHTML"],[3,"result"]],template:function(e,t){1&e&&(i.Rb(0,"app-sql-input",0),i.Yb("result",(function(e){return t.onUserInput(e)}))("addExplainChange",(function(e){return t.explain=e}))("safeModeChange",(function(e){return t.safeMode=e})),i.Qb(),i.Ac(1,H,7,0,"ng-container",1),i.Ac(2,q,17,2,"ng-container",1),i.Ac(3,B,4,1,"ng-container",1),i.Ac(4,D,5,1,"ng-container",1),i.Ac(5,U,4,1,"ng-container",1),i.Ac(6,Y,4,1,"ng-container",1)),2&e&&(i.gc("sql",t.prefill)("safeMode",!t.exercise.disableSafeMode),i.zb(1),i.gc("ngIf",t.solution&&t.solutionCorrect),i.zb(1),i.gc("ngIf",t.solution&&!t.solutionCorrect),i.zb(1),i.gc("ngIf",t.showHint),i.zb(1),i.gc("ngIf",t.showSolution),i.zb(1),i.gc("ngIf",t.userResult),i.zb(1),i.gc("ngIf",t.solution&&t.solutionCorrect))},directives:[O.a,c.o,l.w,l.f,l.g,L.a,l.e,L.i,L.k,l.B,F.a],styles:[""]}),e})();const J=function(){return["btn-sm","btn-primary"]};function V(e,t){if(1&e&&(i.Pb(0),i.Rb(1,"div",2),i.Rb(2,"div",3),i.Mb(3,"app-exercise-progress-detail",4),i.Qb(),i.Rb(4,"div",5),i.Rb(5,"div",6),i.Mb(6,"app-previous-exercise-button",7),i.Mb(7,"app-next-exercise-button",7),i.Qb(),i.Qb(),i.Qb(),i.Rb(8,"h1"),i.Cc(9),i.Qb(),i.Mb(10,"app-exercise-body",8),i.Mb(11,"app-exercise-compare",9),i.Ob()),2&e){const e=i.ac();i.zb(3),i.gc("exerciseId",e.exerciseId),i.zb(3),i.gc("exerciseId",e.exerciseId)("btnClasses",i.jc(8,J)),i.zb(1),i.gc("exerciseId",e.exerciseId)("btnClasses",i.jc(9,J)),i.zb(2),i.Dc(e.exercise.name),i.zb(1),i.gc("body",e.exercise.body),i.zb(1),i.gc("useExercise",e.exercise)}}function $(e,t){1&e&&(i.Rb(0,"p"),i.Rb(1,"i"),i.Cc(2,"The requested resource could not be loaded. No idea why."),i.Qb(),i.Qb())}let K=(()=>{class e{constructor(e,t){this.exerciseService=e,this.route=t,this.isSynced=!1}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.isSynced&&this.exerciseId&&this.fetchExerciseDoc(this.exerciseId)}}),this.route.paramMap.subscribe({next:e=>{this.exerciseId=e.get("id"),this.isSynced&&this.fetchExerciseDoc(this.exerciseId)}})}fetchExerciseDoc(e){this.exerciseService.getExerciseById(e).then(e=>{this.exercise=e})}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(n.a),i.Lb(o.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-exercise-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[1,"clr-row"],[1,"clr-col-10",2,"overflow-x","auto"],[3,"exerciseId"],[1,"clr-col-2",2,"display","flex","flex-direction","column","justify-content","center"],[2,"display","flex","flex-direction","row","justify-content","center"],[3,"exerciseId","btnClasses"],[3,"body"],[3,"useExercise"]],template:function(e,t){if(1&e&&(i.Ac(0,V,12,10,"ng-container",0),i.Ac(1,$,3,0,"ng-template",null,1,i.Bc)),2&e){const e=i.mc(2);i.gc("ngIf",t.exercise)("ngIfElse",e)}},directives:[c.o,p,I,E,k,j],styles:[""]}),e})();var W=s("sWoP"),X=s("Yv6K");let _=(()=>{class e{}return e.\u0275mod=i.Jb({type:e}),e.\u0275inj=i.Ib({factory:function(t){return new(t||e)},imports:[[c.c,o.g.forChild([{path:":id",component:K}]),W.a,X.a]]}),e})()}}]);