(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{wJ9R:function(e,t,s){"use strict";s.r(t),s.d(t,"ExercisePageModule",(function(){return N}));var n=s("ofXK"),c=s("fXoL"),i=s("ws30"),o=s("tyNb");function r(e,t){1&e&&(c.Pb(0),c.Rb(1,"span"),c.Bc(2," No active track"),c.Qb(),c.Ob())}const b=function(e){return["/","e",e]};function l(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"button",3),c.Bc(2," Next "),c.Rb(3,"span",4),c.Bc(4),c.Qb(),c.Qb(),c.Ob()),2&e){const e=c.ac(2);c.zb(1),c.fc("routerLink",c.jc(3,b,e.nextExericse.id))("ngClass",e.btnClasses),c.zb(3),c.Dc(" Next up: ",e.nextExericse.name," ")}}function a(e,t){if(1&e&&(c.Rb(0,"button",5),c.Bc(1," Next "),c.Rb(2,"span",4),c.Bc(3),c.Qb(),c.Qb()),2&e){const e=c.ac(2);c.fc("disabled",!0)("ngClass",e.btnClasses),c.zb(3),c.Ec(" This was the last ",e.onlyUnsolved?"unsolved ":""," exercise ","all"===e.session?"on this track":"in this session",".")}}function u(e,t){if(1&e&&(c.zc(0,l,5,5,"ng-container",0),c.zc(1,a,4,4,"ng-template",null,2,c.Ac)),2&e){const e=c.lc(2),t=c.ac();c.fc("ngIf",t.nextExericse)("ngIfElse",e)}}let h=(()=>{class e{constructor(e){this.exerciseService=e,this.session="all",this.onlyUnsolved=!1,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currId=e,this.isSynced&&this.getNext()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.nextExericse||this.getNext()}})}getNext(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){let e;this.onlyUnsolved?e=this.exerciseService.getNextUnsolvedExercise(this.currId,this.session):(e=this.exerciseService.getNextExercise(this.currId,this.session),console.log(e)),this.nextExericse=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(i.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-next-exercise-button"]],inputs:{exerciseId:"exerciseId",session:"session",onlyUnsolved:"onlyUnsolved",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-left",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(c.zc(0,r,3,0,"ng-container",0),c.zc(1,u,3,2,"ng-template",null,1,c.Ac)),2&e){const e=c.lc(2);c.fc("ngIf",!t.hasActiveTrack)("ngIfElse",e)}},directives:[n.o,o.c,n.m],styles:[""]}),e})();var f=s("tk/3");function d(e,t){if(1&e&&(c.Pb(0),c.Mb(1,"div",1),c.Ob()),2&e){const e=c.ac(2);c.zb(1),c.fc("innerHTML",e.content,c.qc)}}function p(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"p"),c.Bc(2),c.Qb(),c.Ob()),2&e){const e=c.ac(2);c.zb(2),c.Cc(e.content)}}function g(e,t){if(1&e&&(c.Pb(0),c.zc(1,d,2,1,"ng-container",0),c.zc(2,p,3,1,"ng-container",0),c.Ob()),2&e){const e=c.ac();c.zb(1),c.fc("ngIf","html"===e.body.type),c.zb(1),c.fc("ngIf","text"===e.body.type)}}let x=(()=>{class e{constructor(e){this.http=e}ngOnInit(){this.body&&(this.body.content?this.content=this.body.content:this.loadFromUrl())}loadFromUrl(){this.http.get(this.body.url).subscribe({next:e=>console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(f.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-exercise-body"]],inputs:{body:"body"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&c.zc(0,g,3,2,"ng-container",0),2&e&&c.fc("ngIf",t.body)},directives:[n.o],styles:[""]}),e})();var y=s("LvDl"),v=s("aLtf"),I=s("+3VT"),z=s("8MG2"),R=s("3Pt+"),S=s("SS/w");function Q(e,t){1&e&&(c.Pb(0),c.Rb(1,"div",2),c.Rb(2,"div",3),c.Mb(3,"clr-icon",4),c.Qb(),c.Rb(4,"div",5),c.Rb(5,"p"),c.Bc(6,"Your solution is correct."),c.Qb(),c.Qb(),c.Qb(),c.Ob())}function M(e,t){if(1&e){const e=c.Sb();c.Rb(0,"clr-toggle-container"),c.Rb(1,"clr-toggle-wrapper"),c.Rb(2,"input",9),c.Yb("ngModelChange",(function(t){return c.pc(e),c.ac(2).showHint=t})),c.Qb(),c.Rb(3,"label"),c.Bc(4,"show hint"),c.Qb(),c.Qb(),c.Qb()}if(2&e){const e=c.ac(2);c.zb(2),c.fc("ngModel",e.showHint)}}function m(e,t){if(1&e){const e=c.Sb();c.Pb(0),c.Rb(1,"div",2),c.Rb(2,"div",3),c.Mb(3,"clr-icon",6),c.Qb(),c.Rb(4,"div",5),c.Rb(5,"div",2),c.Rb(6,"div",7),c.Rb(7,"p"),c.Bc(8,"Your solution is not yet quite correct"),c.Qb(),c.Qb(),c.Rb(9,"div",8),c.Rb(10,"clr-toggle-container"),c.Rb(11,"clr-toggle-wrapper"),c.Rb(12,"input",9),c.Yb("ngModelChange",(function(t){return c.pc(e),c.ac().showSolution=t})),c.Qb(),c.Rb(13,"label"),c.Bc(14,"show solution"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(15,"div",8),c.zc(16,M,5,1,"clr-toggle-container",1),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Ob()}if(2&e){const e=c.ac();c.zb(12),c.fc("ngModel",e.showSolution),c.zb(4),c.fc("ngIf",e.exercise.hint)}}function w(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"h3"),c.Bc(2,"Hint"),c.Qb(),c.Mb(3,"p",10),c.Ob()),2&e){const e=c.ac();c.zb(3),c.fc("innerHTML",e.exercise.hint,c.qc)}}function C(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"h3"),c.Bc(2,"Solution query"),c.Qb(),c.Rb(3,"pre"),c.Mb(4,"code",10),c.Qb(),c.Ob()),2&e){const e=c.ac();c.zb(4),c.fc("innerHTML",e.exercise.solution.code?e.exercise.solution.code:e.exercise.solution.content,c.qc)}}function E(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"h3"),c.Bc(2,"Your Solution"),c.Qb(),c.Mb(3,"app-sql-result",11),c.Ob()),2&e){const e=c.ac();c.zb(3),c.fc("result",e.userResult)}}function k(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"h3"),c.Bc(2,"Sample Solution"),c.Qb(),c.Mb(3,"app-sql-result",11),c.Ob()),2&e){const e=c.ac();c.zb(3),c.fc("result",e.solution)}}let O=(()=>{class e{constructor(e,t){this.exerciseService=e,this.progress=t,this.checked=new c.n,this.explain=!1,this.safeMode=!0,this.solutionCorrect=!1,this.showSolution=!1,this.showHint=!1}ngOnInit(){}onUserInput(e){if(this.userResult=e,this.solution)this.compare();else{const e=this.explain?"text":null;console.log(`Explain: ${e} Safe Mode: ${this.safeMode}`),this.exerciseService.executeSql(this.exercise.solution.content,e,!this.safeMode).then(e=>this.solution=e).then(()=>this.compare()).catch(e=>console.log(e))}}compare(){Object(y.isEqual)(this.userResult.data,this.solution.data)?(this.solutionCorrect=!0,this.showSolution=!0):this.solutionCorrect=!1,this.progress.update(this.exercise.id,this.solutionCorrect).then(()=>{this.checked.emit(this.solutionCorrect)})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(i.a),c.Lb(v.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-exercise-compare"]],inputs:{exercise:"exercise"},outputs:{checked:"checked"},decls:7,vars:7,consts:[[3,"safeMode","result","addExplainChange","safeModeChange"],[4,"ngIf"],[1,"clr-row"],[1,"clr-col-4"],["shape","check","size","72"],[1,"clr-col-8"],["shape","times","size","72"],[1,"clr-col-12"],[1,"clr-col-6"],["type","checkbox","clrToggle","",3,"ngModel","ngModelChange"],[3,"innerHTML"],[3,"result"]],template:function(e,t){1&e&&(c.Rb(0,"app-sql-input",0),c.Yb("result",(function(e){return t.onUserInput(e)}))("addExplainChange",(function(e){return t.explain=e}))("safeModeChange",(function(e){return t.safeMode=e})),c.Qb(),c.zc(1,Q,7,0,"ng-container",1),c.zc(2,m,17,2,"ng-container",1),c.zc(3,w,4,1,"ng-container",1),c.zc(4,C,5,1,"ng-container",1),c.zc(5,E,4,1,"ng-container",1),c.zc(6,k,4,1,"ng-container",1)),2&e&&(c.fc("safeMode",!t.exercise.disableSafeMode),c.zb(1),c.fc("ngIf",t.solution&&t.solutionCorrect),c.zb(1),c.fc("ngIf",t.solution&&!t.solutionCorrect),c.zb(1),c.fc("ngIf",t.showHint),c.zb(1),c.fc("ngIf",t.showSolution),c.zb(1),c.fc("ngIf",t.userResult),c.zb(1),c.fc("ngIf",t.solution&&t.solutionCorrect))},directives:[I.a,n.o,z.w,z.f,z.g,R.a,z.e,R.i,R.k,z.B,S.a],styles:[""]}),e})();function B(e,t){if(1&e&&(c.Pb(0),c.Rb(1,"div",2),c.Mb(2,"app-next-exercise-button",3),c.Qb(),c.Rb(3,"h1"),c.Bc(4),c.Qb(),c.Mb(5,"app-exercise-body",4),c.Mb(6,"app-exercise-compare",5),c.Ob()),2&e){const e=c.ac();c.zb(2),c.fc("exerciseId",e.exerciseId),c.zb(2),c.Cc(e.exercise.name),c.zb(1),c.fc("body",e.exercise.body),c.zb(1),c.fc("exercise",e.exercise)}}function L(e,t){1&e&&(c.Rb(0,"p"),c.Rb(1,"i"),c.Bc(2,"The requested resource could not be loaded. No idea why."),c.Qb(),c.Qb())}let P=(()=>{class e{constructor(e,t){this.exerciseService=e,this.route=t,this.isSynced=!1}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.isSynced&&this.exerciseId&&this.fetchExerciseDoc(this.exerciseId)}}),this.route.paramMap.subscribe({next:e=>{this.exerciseId=e.get("id"),this.isSynced&&this.fetchExerciseDoc(this.exerciseId)}})}fetchExerciseDoc(e){this.exerciseService.getExerciseById(e).then(e=>{this.exercise=e})}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(i.a),c.Lb(o.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-exercise-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[2,"float","right"],[3,"exerciseId"],[3,"body"],[3,"exercise"]],template:function(e,t){if(1&e&&(c.zc(0,B,7,4,"ng-container",0),c.zc(1,L,3,0,"ng-template",null,1,c.Ac)),2&e){const e=c.lc(2);c.fc("ngIf",t.exercise)("ngIfElse",e)}},directives:[n.o,h,x,O],styles:[""]}),e})();var T=s("sWoP"),q=s("Yv6K");let N=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[n.c,o.f.forChild([{path:":id",component:P}]),T.a,q.a]]}),e})()}}]);