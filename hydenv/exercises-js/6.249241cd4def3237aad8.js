(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{wJ9R:function(e,t,s){"use strict";s.r(t),s.d(t,"ExercisePageModule",(function(){return U}));var n=s("ofXK"),c=s("fXoL"),i=s("ws30"),o=s("tyNb");function r(e,t){1&e&&(c.Nb(0),c.Pb(1,"span"),c.yc(2," No active track"),c.Ob(),c.Mb())}const b=function(e){return["/","e",e]};function l(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"button",3),c.yc(2," Next "),c.Pb(3,"span",4),c.yc(4),c.Ob(),c.Ob(),c.Mb()),2&e){const e=c.Yb(2);c.yb(1),c.dc("routerLink",c.hc(3,b,e.nextExericse.id))("ngClass",e.btnClasses),c.yb(3),c.Ac(" Next up: ",e.nextExericse.name," ")}}function u(e,t){if(1&e&&(c.Pb(0,"button",5),c.yc(1," Next "),c.Pb(2,"span",4),c.yc(3),c.Ob(),c.Ob()),2&e){const e=c.Yb(2);c.dc("disabled",!0)("ngClass",e.btnClasses),c.yb(3),c.Bc(" This was the last ",e.onlyUnsolved?"unsolved ":""," exercise ","all"===e.session?"on this track":"in this session",".")}}function a(e,t){if(1&e&&(c.wc(0,l,5,5,"ng-container",0),c.wc(1,u,4,4,"ng-template",null,2,c.xc)),2&e){const e=c.jc(2),t=c.Yb();c.dc("ngIf",t.nextExericse)("ngIfElse",e)}}let h=(()=>{class e{constructor(e){this.exerciseService=e,this.session="all",this.onlyUnsolved=!1,this.btnClasses=["btn-primary"],this.isSynced=!1,this.hasActiveTrack=!1}set exerciseId(e){this.currId=e,this.isSynced&&this.getNext()}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.nextExericse||this.getNext()}})}getNext(){if(this.hasActiveTrack=null!==this.exerciseService.activeTrack.getValue(),this.hasActiveTrack){let e;this.onlyUnsolved?e=this.exerciseService.getNextUnsolvedExercise(this.currId,this.session):(e=this.exerciseService.getNextExercise(this.currId,this.session),console.log(e)),this.nextExericse=e&&-1!==e?e:null}}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(i.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-next-exercise-button"]],inputs:{exerciseId:"exerciseId",session:"session",onlyUnsolved:"onlyUnsolved",btnClasses:"btnClasses"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noTrack",""],["noExercise",""],[1,"btn","tooltip","tooltip-bottom-left",3,"routerLink","ngClass"],[1,"tooltip-content"],[1,"btn","tooltip","tooltip-bottom-left",3,"disabled","ngClass"]],template:function(e,t){if(1&e&&(c.wc(0,r,3,0,"ng-container",0),c.wc(1,a,3,2,"ng-template",null,1,c.xc)),2&e){const e=c.jc(2);c.dc("ngIf",!t.hasActiveTrack)("ngIfElse",e)}},directives:[n.o,o.c,n.m],styles:[""]}),e})();var d=s("tk/3");function p(e,t){if(1&e&&(c.Nb(0),c.Kb(1,"div",1),c.Mb()),2&e){const e=c.Yb(2);c.yb(1),c.dc("innerHTML",e.content,c.oc)}}function y(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"p"),c.yc(2),c.Ob(),c.Mb()),2&e){const e=c.Yb(2);c.yb(2),c.zc(e.content)}}function f(e,t){if(1&e&&(c.Nb(0),c.wc(1,p,2,1,"ng-container",0),c.wc(2,y,3,1,"ng-container",0),c.Mb()),2&e){const e=c.Yb();c.yb(1),c.dc("ngIf","html"===e.body.type),c.yb(1),c.dc("ngIf","text"===e.body.type)}}let g=(()=>{class e{constructor(e){this.http=e}ngOnInit(){this.body&&(this.body.content?this.content=this.body.content:this.loadFromUrl())}loadFromUrl(){this.http.get(this.body.url).subscribe({next:e=>console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(d.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-exercise-body"]],inputs:{body:"body"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHTML"]],template:function(e,t){1&e&&c.wc(0,f,3,2,"ng-container",0),2&e&&c.dc("ngIf",t.body)},directives:[n.o],styles:[""]}),e})();var x=s("LvDl"),v=s("aLtf"),w=s("+3VT"),O=s("8MG2"),I=s("3Pt+"),P=s("jHTl");function m(e,t){1&e&&(c.Nb(0),c.Pb(1,"div",2),c.Pb(2,"div",3),c.Kb(3,"clr-icon",4),c.Ob(),c.Pb(4,"div",5),c.Pb(5,"p"),c.yc(6,"Your solution is correct."),c.Ob(),c.Ob(),c.Ob(),c.Mb())}function S(e,t){if(1&e){const e=c.Qb();c.Pb(0,"clr-toggle-container"),c.Pb(1,"clr-toggle-wrapper"),c.Pb(2,"input",9),c.Wb("ngModelChange",(function(t){return c.nc(e),c.Yb(2).showHint=t})),c.Ob(),c.Pb(3,"label"),c.yc(4,"show hint"),c.Ob(),c.Ob(),c.Ob()}if(2&e){const e=c.Yb(2);c.yb(2),c.dc("ngModel",e.showHint)}}function M(e,t){if(1&e){const e=c.Qb();c.Nb(0),c.Pb(1,"div",2),c.Pb(2,"div",3),c.Kb(3,"clr-icon",6),c.Ob(),c.Pb(4,"div",5),c.Pb(5,"div",2),c.Pb(6,"div",7),c.Pb(7,"p"),c.yc(8,"Your solution is not yet quite correct"),c.Ob(),c.Ob(),c.Pb(9,"div",8),c.wc(10,S,5,1,"clr-toggle-container",1),c.Ob(),c.Pb(11,"div",8),c.Pb(12,"clr-toggle-container"),c.Pb(13,"clr-toggle-wrapper"),c.Pb(14,"input",9),c.Wb("ngModelChange",(function(t){return c.nc(e),c.Yb().showSolution=t})),c.Ob(),c.Pb(15,"label"),c.yc(16,"show solution"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Mb()}if(2&e){const e=c.Yb();c.yb(10),c.dc("ngIf",e.exercise.hint),c.yb(4),c.dc("ngModel",e.showSolution)}}function N(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"h3"),c.yc(2,"Hint"),c.Ob(),c.Kb(3,"p",10),c.Mb()),2&e){const e=c.Yb();c.yb(3),c.dc("innerHTML",e.exercise.hint,c.oc)}}function C(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"h3"),c.yc(2,"Solution query"),c.Ob(),c.Pb(3,"pre"),c.Kb(4,"code",10),c.Ob(),c.Mb()),2&e){const e=c.Yb();c.yb(4),c.dc("innerHTML",e.exercise.solution.content,c.oc)}}function k(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"h3"),c.yc(2,"Your Solution"),c.Ob(),c.Kb(3,"app-sql-result",0),c.Mb()),2&e){const e=c.Yb();c.yb(3),c.dc("result",e.userResult)}}function E(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"h3"),c.yc(2,"Sample Solution"),c.Ob(),c.Kb(3,"app-sql-result",0),c.Mb()),2&e){const e=c.Yb();c.yb(3),c.dc("result",e.solution)}}let Y=(()=>{class e{constructor(e,t){this.exerciseService=e,this.progress=t,this.checked=new c.n,this.solutionCorrect=!1,this.showSolution=!1,this.showHint=!1}ngOnInit(){}onUserInput(e){this.userResult=e,this.solution?this.compare():this.exerciseService.executeSql(this.exercise.solution.content).then(e=>this.solution=e).then(()=>this.compare()).catch(e=>console.log(e))}compare(){Object(x.isEqual)(this.userResult.data,this.solution.data)?(this.solutionCorrect=!0,this.showSolution=!0):this.solutionCorrect=!1,this.progress.update(this.exercise.id,this.solutionCorrect).then(()=>{this.checked.emit(this.solutionCorrect)})}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(i.a),c.Jb(v.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-exercise-compare"]],inputs:{exercise:"exercise"},outputs:{checked:"checked"},decls:7,vars:6,consts:[[3,"result"],[4,"ngIf"],[1,"clr-row"],[1,"clr-col-4"],["shape","check","size","72"],[1,"clr-col-8"],["shape","times","size","72"],[1,"clr-col-12"],[1,"clr-col-6"],["type","checkbox","clrToggle","",3,"ngModel","ngModelChange"],[3,"innerHTML"]],template:function(e,t){1&e&&(c.Pb(0,"app-sql-input",0),c.Wb("result",(function(e){return t.onUserInput(e)})),c.Ob(),c.wc(1,m,7,0,"ng-container",1),c.wc(2,M,17,2,"ng-container",1),c.wc(3,N,4,1,"ng-container",1),c.wc(4,C,5,1,"ng-container",1),c.wc(5,k,4,1,"ng-container",1),c.wc(6,E,4,1,"ng-container",1)),2&e&&(c.yb(1),c.dc("ngIf",t.solution&&t.solutionCorrect),c.yb(1),c.dc("ngIf",t.solution&&!t.solutionCorrect),c.yb(1),c.dc("ngIf",t.showHint),c.yb(1),c.dc("ngIf",t.showSolution),c.yb(1),c.dc("ngIf",t.userResult),c.yb(1),c.dc("ngIf",t.solution&&t.solutionCorrect))},directives:[w.a,n.o,O.w,O.f,O.g,I.a,O.e,I.i,I.k,O.A,P.a],styles:[""]}),e})();function T(e,t){if(1&e&&(c.Nb(0),c.Pb(1,"div",2),c.Kb(2,"app-next-exercise-button",3),c.Ob(),c.Pb(3,"h1"),c.yc(4),c.Ob(),c.Kb(5,"app-exercise-body",4),c.Kb(6,"app-exercise-compare",5),c.Mb()),2&e){const e=c.Yb();c.yb(2),c.dc("exerciseId",e.exerciseId),c.yb(2),c.zc(e.exercise.name),c.yb(1),c.dc("body",e.exercise.body),c.yb(1),c.dc("exercise",e.exercise)}}function H(e,t){1&e&&(c.Pb(0,"p"),c.Pb(1,"i"),c.yc(2,"The requested resource could not be loaded. No idea why."),c.Ob(),c.Ob())}let K=(()=>{class e{constructor(e,t){this.exerciseService=e,this.route=t,this.isSynced=!1}ngOnInit(){this.syncSubscription=this.exerciseService.syncFinished.subscribe({next:e=>{this.isSynced=e,this.isSynced&&this.exerciseId&&this.fetchExerciseDoc(this.exerciseId)}}),this.route.paramMap.subscribe({next:e=>{this.exerciseId=e.get("id"),this.isSynced&&this.fetchExerciseDoc(this.exerciseId)}})}fetchExerciseDoc(e){this.exerciseService.getExerciseById(e).then(e=>{this.exercise=e})}ngOnDestroy(){this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(i.a),c.Jb(o.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-exercise-page"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notFound",""],[2,"float","right"],[3,"exerciseId"],[3,"body"],[3,"exercise"]],template:function(e,t){if(1&e&&(c.wc(0,T,7,4,"ng-container",0),c.wc(1,H,3,0,"ng-template",null,1,c.xc)),2&e){const e=c.jc(2);c.dc("ngIf",t.exercise)("ngIfElse",e)}},directives:[n.o,h,g,Y],styles:[""]}),e})();var D=s("sWoP"),L=s("Yv6K");let U=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[n.c,o.f.forChild([{path:":id",component:K}]),D.a,L.a]]}),e})()}}]);